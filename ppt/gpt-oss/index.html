<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>GPT-OSS 深度解析</title>
    <meta name="description" content="GPT-OSS 与 Harmony 格式的核心意义：从 ChatML 到多通道架构的技术演进、对开发者与训练者的启发。">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="color-scheme" content="dark light">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* 确保所有带 hidden 属性的元素强制隐藏，避免被其他 display 样式覆盖 */
        [hidden] { display: none !important; }

        body {
            font-family: 'Microsoft YaHei', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            /* 默认幻灯片按整屏展示；移动端将在媒体查询中开启纵向滚动 */
            overflow: hidden;
            position: relative;
        }
        /* 避免偶发的横向滚动条 */
        html, body { max-width: 100%; overflow-x: hidden; }

        /* 粒子背景 - 更轻柔的效果 */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #00ffff;
            border-radius: 50%;
            opacity: 0;
            box-shadow: 0 0 6px rgba(0, 255, 255, 0.8);
            animation: particleFloat 12s infinite linear;
        }

        .particle.large {
            width: 3px;
            height: 3px;
            box-shadow: 0 0 8px rgba(0, 255, 255, 0.6);
        }

        .particle.small {
            width: 1px;
            height: 1px;
            box-shadow: 0 0 4px rgba(0, 255, 255, 0.9);
        }

        @keyframes particleFloat {
            0% {
                transform: translateY(100vh) translateX(0) scale(0);
                opacity: 0;
            }
            5% {
                opacity: 0.6;
                transform: translateY(95vh) translateX(10px) scale(1);
            }
            50% {
                opacity: 0.8;
                transform: translateY(50vh) translateX(var(--random-x, 30px)) scale(1.2);
            }
            95% {
                opacity: 0.4;
                transform: translateY(5vh) translateX(calc(var(--random-x, 30px) * 2)) scale(0.8);
            }
            100% {
                transform: translateY(-10vh) translateX(calc(var(--random-x, 30px) * 2.5)) scale(0);
                opacity: 0;
            }
        }

    /* 防止 iOS 自动放大文本导致布局抖动 */
    html, body { -webkit-text-size-adjust: 100%; }

    /* 轻柔的网格背景 */
        .grid-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(rgba(0, 255, 255, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 255, 0.05) 1px, transparent 1px);
            background-size: 60px 60px;
            z-index: 0;
            animation: gridMove 30s linear infinite;
        }

    /* 媒体元素自适应屏幕宽度，避免横向溢出 */
    img, video, canvas, svg { max-width: 100%; height: auto; }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(60px, 60px); }
        }

        /* 主容器 */
        .container {
            position: relative;
            z-index: 10;
            /* 避免 100vw 在移动端包含滚动条造成的水平溢出 */
            width: 100%;
            /* 使用 100vh，移动端在媒体查询中改为 100dvh/100svh */
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* 页面样式 */
        .page {
            display: none;
            width: 90%;
            max-width: 1200px;
            text-align: center;
            padding: 50px;
            animation: slideIn 0.6s ease-out;
        }

        .page.active {
            display: block;
        }



        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* 标题样式 - 占据80%宽度，更强对比度 */
        .main-title {
            width: 80%;
            margin: -80px auto 0 auto;
            font-size: clamp(3rem, 8vw, 7rem);
            font-weight: 900;
            line-height: 1.1;
            text-shadow: 0 0 16px rgba(0, 255, 255, 0.35);
            filter: contrast(1.2);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .main-title .secondary {
            color: #ffffff;
            font-size: clamp(2rem, 5vw, 4.5rem);
            display: block;
            margin: 20px 0;
            font-weight: 300;
            opacity: 0.95;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.4);
            white-space: nowrap;
        }

        .main-title .highlight {
            color: #ffffff;
            font-size: clamp(4rem, 10vw, 9rem);
            display: block;
            margin: 30px 0;
            font-weight: 900;
            text-shadow:
                0 0 6px rgba(0, 255, 255, 0.5),
                0 0 12px rgba(0, 255, 255, 0.3);
            filter: contrast(1.15);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            /* 降低动效，保持低调 */
            animation: none;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.9; }
        }

        /* 副标题 */
        .subtitle {
            font-size: clamp(1.2rem, 2.5vw, 2rem);
            color: #888888;
            margin-top: 40px;
            font-weight: 300;
        }

        /* 统一的页面标题样式 - 占据80%宽度 */
        .page-title {
            width: 80%;
            margin: 0 auto 50px auto;
            font-size: clamp(2.5rem, 6vw, 5rem);
            font-weight: bold;
            color: #00ffff;
            line-height: 1.2;
        }

        /* 提纲列表样式 */
        .outline-list {
            text-align: left;
            max-width: 900px;
            margin: 0 auto;
        }

        .outline-list li {
            font-size: clamp(1.2rem, 2.5vw, 1.8rem);
            margin: 25px 0;
            padding: 20px 30px;
            background: rgba(0, 255, 255, 0.08);
            border-left: 5px solid #00ffff;
            border-radius: 10px;
            list-style: none;
            transition: all 0.3s ease;
        }

        .outline-list li:hover {
            background: rgba(0, 255, 255, 0.15);
            transform: translateX(10px);
        }

        /* 导航按钮 */
        .navigation {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
            display: flex;
            gap: 15px;
        }

        .nav-btn {
            padding: 12px 24px;
            background: rgba(0, 255, 255, 0.15);
            border: 2px solid #00ffff;
            color: #ffffff;
            cursor: pointer;
            border-radius: 25px;
            font-size: 1rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            min-height: 44px; /* 提升触控命中范围 */
            -webkit-tap-highlight-color: rgba(0,0,0,0);
            white-space: nowrap; /* 防止中文按钮文字竖排换行 */
        }

        .nav-btn:hover {
            background: rgba(0, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.2);
        }

        .nav-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        /* 页码指示器（放在底部导航中间，简洁样式） */
        .navigation .page-indicator {
            position: static;
            transform: none;
            font-size: 1rem;
            color: #00ffff;
            background: transparent;
            padding: 0 8px;
            border: none;
            border-radius: 0;
            backdrop-filter: none;
            line-height: 1;
            align-self: center;
        }

        /* 首页资源链接与提示 */
        .intro-meta {
            width: 80%;
            margin: 32px auto 0 auto;
            display: flex;
            flex-direction: column;
            gap: 14px;
            align-items: center;
        }

        .ppt-hint {
            color: #aaaaaa;
            font-size: 1.1rem;
        }

        .resource-links {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
        }

        .link-btn {
            padding: 10px 16px;
            border: 1px solid rgba(0, 255, 255, 0.6);
            background: rgba(0, 255, 255, 0.12);
            color: #ffffff;
            border-radius: 9999px;
            text-decoration: none;
            transition: all 0.2s ease;
            font-size: 0.95rem;
            backdrop-filter: blur(6px);
            -webkit-backdrop-filter: blur(6px);
        }

        /* 提纲 - 纵向大卡片 */
        .outline-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 16px;
            max-width: 820px;
            margin: 0 auto;
        }

        .outline-card {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 26px 28px;
            background: rgba(0, 255, 255, 0.08);
            border: 2px solid rgba(0, 255, 255, 0.25);
            border-radius: 14px;
            color: #ffffff;
            text-decoration: none;
            transition: transform 0.2s ease, background 0.2s ease, border-color 0.2s ease;
            cursor: pointer;
        }

        .outline-card:hover {
            transform: translateY(-3px);
            background: rgba(0, 255, 255, 0.16);
            border-color: rgba(0, 255, 255, 0.5);
            box-shadow: 0 10px 24px rgba(0, 255, 255, 0.08);
        }

        .outline-icon {
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .outline-title {
            font-size: 1.35rem;
        }

        @media (max-width: 600px) {
            .outline-grid { max-width: 92vw; }
            .outline-title { font-size: 1.15rem; }
        }

        /* 提纲卡片预览与两列布局（大屏） */
        .outline-desc {
            display: block;
            margin-top: 6px;
            color: #a7cbd6;
            font-size: 0.95rem;
            opacity: 0.95;
        }
        @media (min-width: 900px) {
            .outline-grid {
                grid-template-columns: repeat(2, minmax(300px, 1fr));
                max-width: 1100px;
                gap: 18px;
            }
        }

        /* 目录页（第2页）单列与标题居中 */
        #page2 .page-title {
            text-align: center;
        }
        #page2 .outline-grid {
            grid-template-columns: 1fr !important;
            max-width: 820px !important;
        }

        /* 提纲卡片内文本全部左对齐 */
        .outline-card { text-align: left; }

        /* 目录卡片对比色变体 */
        .outline-card.red { border-color: rgba(255, 120, 120, 0.5); background: rgba(60, 20, 20, 0.6); }
        .outline-card.green { border-color: rgba(120, 255, 160, 0.5); background: rgba(20, 60, 30, 0.6); }
        .outline-card.purple { border-color: rgba(170, 140, 255, 0.5); background: rgba(35, 25, 60, 0.6); }
        .outline-card.yellow { border-color: rgba(255, 220, 120, 0.5); background: rgba(60, 55, 20, 0.6); }
        .outline-card.red:hover { border-color: rgba(255, 120, 120, 0.85); }
        .outline-card.green:hover { border-color: rgba(120, 255, 160, 0.85); }
        .outline-card.purple:hover { border-color: rgba(170, 140, 255, 0.85); }
        .outline-card.yellow:hover { border-color: rgba(255, 220, 120, 0.85); }

        /* 第6页：洞察卡片样式（精简版） */
        #page6 { padding: 28px 20px; }
        #page6 .page-title { font-size: clamp(1.8rem, 4vw, 2.6rem); margin-bottom: 10px; }
        #page6 .subtitle { font-size: clamp(1rem, 2vw, 1.15rem); margin-top: 6px; color: #a7cbd6; }

        #page6 .insight-grid {
            display: grid;
            gap: 14px;
            grid-template-columns: 1fr;
            max-width: 980px;
            margin: 16px auto 0 auto;
        }
        @media (min-width: 900px) {
            #page6 .insight-grid { grid-template-columns: repeat(2, minmax(280px, 1fr)); }
        }
        #page6 .insight-card {
            background: rgba(0, 255, 255, 0.06);
            border: 2px solid rgba(0, 255, 255, 0.22);
            border-radius: 14px;
            padding: 18px 20px;
            text-align: left;
            transition: transform 0.2s ease, background 0.2s ease, border-color 0.2s ease;
        }
        #page6 .insight-card:hover {
            transform: translateY(-2px);
            background: rgba(0, 255, 255, 0.12);
            border-color: rgba(0, 255, 255, 0.45);
            box-shadow: 0 10px 24px rgba(0, 255, 255, 0.08);
        }
        #page6 .insight-title {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 6px;
            color: #e6f7ff;
        }
        #page6 .insight-body { color: #cfeaf2; font-size: 0.98rem; line-height: 1.55; }

        /* 关键词高亮（对比色） */
        .kw { font-weight: 700; text-shadow: 0 0 8px rgba(255,255,255,0.08); }
        .kw-cyan { color: #00ffff; }
        .kw-red { color: #ff6b6b; }
        .kw-green { color: #78f0a8; }
        .kw-amber { color: #ffd166; }
        .kw-purple { color: #b18cff; }
        .kw-blue { color: #54a0ff; }

        /* 不同色系卡片边框背景（对比但低饱和） */
        #page6 .insight-card.cyan { border-color: rgba(0,255,255,0.45); background: rgba(0, 90, 90, 0.25); }
        #page6 .insight-card.red { border-color: rgba(255,120,120,0.45); background: rgba(95, 35, 35, 0.25); }
        #page6 .insight-card.green { border-color: rgba(120,255,160,0.45); background: rgba(25, 70, 45, 0.25); }
        #page6 .insight-card.purple { border-color: rgba(170,140,255,0.45); background: rgba(45, 35, 85, 0.25); }
        #page6 .insight-card.yellow { border-color: rgba(255,220,120,0.45); background: rgba(85, 70, 25, 0.25); }
        #page6 .insight-card.blue { border-color: rgba(84,160,255,0.45); background: rgba(25, 50, 85, 0.25); }

        /* 提纲卡片右侧“>”图标与动效 */
        .outline-chevron {
            margin-left: auto;
            color: #58e0ff;
            font-size: 1.3rem;
            opacity: 0.85;
            line-height: 1;
            transform: translateX(0);
            animation: chevronPulse 1.8s ease-in-out infinite;
        }
        .outline-card:hover .outline-chevron {
            transform: translateX(4px);
            opacity: 1;
        }
        @keyframes chevronPulse {
            0%, 100% { transform: translateX(0); opacity: 0.85; }
            50% { transform: translateX(3px); opacity: 1; }
        }

        /* Finale 尾页样式 */
        .finale-wrap {
            position: relative;
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 24px;
        }
        .finale-ring {
            position: absolute;
            inset: -20px;
            border-radius: 24px;
            background: radial-gradient(60% 60% at 50% 50%, rgba(0,255,255,0.08), transparent 70%);
            border: 1px solid rgba(0, 255, 255, 0.15);
            pointer-events: none;
        }
        .finale-title {
            font-size: clamp(2.4rem, 6vw, 3.4rem);
            color: #00ffff;
            text-shadow: 0 0 10px rgba(0,255,255,0.3);
        }
        .finale-divider {
            height: 1px;
            width: 160px;
            margin: 24px auto 0 auto;
            background: linear-gradient(90deg, transparent, rgba(0,255,255,0.6), transparent);
        }
        .finale-subtitle {
            color: #e6f7ff;
            font-size: 1.2rem;
        }
        .finale-note {
            color: #a0d8ef;
            font-size: 1rem;
            letter-spacing: 0.2px;
        }
        .finale-actions {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
        }
        .btn {
            padding: 10px 16px;
            border: 1px solid rgba(0, 255, 255, 0.5);
            color: #ffffff;
            background: rgba(0, 255, 255, 0.08);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            backdrop-filter: blur(6px);
            -webkit-backdrop-filter: blur(6px);
        }
        .btn:hover {
            border-color: rgba(0, 255, 255, 0.8);
            background: rgba(0, 255, 255, 0.16);
            transform: translateY(-1px);
        }
        .btn.primary {
            border-color: #00ffff;
            background: rgba(0, 255, 255, 0.18);
        }

        .link-btn:hover {
            background: rgba(0, 255, 255, 0.22);
            border-color: rgba(0, 255, 255, 0.9);
            transform: translateY(-1px);
        }

        /* 模块内容容器 */
        .module-content {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* 嵌入模块的特殊样式 */
        .module-content.embedded {
            align-items: stretch;
            justify-content: stretch;
            padding: 0;
        }

        .module-content.embedded > div {
            width: 100%;
            height: 100%;
        }



        /* 响应式设计 */
        @media (max-width: 768px) {
            /* 移动端允许垂直滚动，避免内容被裁切；保持横向隐藏 */
            body { overflow-y: auto; -webkit-overflow-scrolling: touch; }

            .page {
                padding: 30px 20px;
                /* 为底部固定导航预留空间，避免内容被遮挡（结合 JS 动态变量） */
                padding-bottom: calc(20px + var(--nav-space, 120px));
            }

            .outline-list li {
                padding: 15px 20px;
                margin: 15px 0;
            }

            .navigation {
                /* 为刘海屏底部安全区预留空间 */
                bottom: calc(20px + env(safe-area-inset-bottom));
                flex-wrap: nowrap; /* 防止按钮换行 */
            }

            .nav-btn {
                padding: 10px 18px;
                font-size: 0.95rem;
            }

            /* 页码指示器随导航自适应，无需额外定位 */
                /* 移动端无需特殊定位，随导航自适应 */

            /* 处理标题在小屏不换行导致的溢出 */
            .main-title .secondary { white-space: normal; }
            /* 调整标题的负外边距，避免顶部被裁切 */
            .main-title { margin-top: -40px; }

            /* 容器在移动端顶部对齐，使用动态视口单位避免地址栏跳动 */
            .container {
                align-items: flex-start;
                height: auto;
                min-height: 100svh;
            }

            /* 演示区在移动端更紧凑，代码区高度自适应屏幕 */
            .code-content { max-height: 35vh; }

            /* 目录页（第2页）在移动端的字号与间距优化 */
            #page2 .page-title { font-size: clamp(1.6rem, 5.5vw, 2.2rem); }
            #page2 .outline-card { padding: 18px 16px; }
            #page2 .outline-title { font-size: 1.05rem; }
            #page2 .outline-desc { font-size: 0.9rem; }
            #page2 .outline-icon { font-size: 1.3rem; }
            #page2 .outline-chevron { font-size: 1.1rem; }
            /* 页码指示器更紧凑 */
            .navigation .page-indicator { font-size: 0.9rem; }
        }

        @media (max-width: 480px) {
            .main-title {
                width: 95%;
            }

            .page-title {
                width: 95%;
            }
            /* 极小屏进一步压缩代码区高度 */
            .code-content { max-height: 30vh; }
            /* 极小屏再收缩导航按钮与间距，避免拥挤导致换行 */
            .navigation { gap: 10px; }
            .nav-btn { padding: 10px 14px; font-size: 0.9rem; }
            .navigation .page-indicator { font-size: 0.85rem; }
            /* 目录页极小屏更紧凑 */
            #page2 .outline-card { padding: 16px 14px; }
            #page2 .outline-title { font-size: 1rem; }
            #page2 .outline-desc { font-size: 0.85rem; }
        }

        /* 支持 100dvh/100svh 的浏览器使用更准确的高度，减少地址栏显示/隐藏带来的抖动 */
        @supports (height: 100dvh) {
            @media (max-width: 768px) {
                .container { height: auto; min-height: 100dvh; }
            }
        }

        /* 减少动态偏好支持 */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation: none !important;
                transition: none !important;
                scroll-behavior: auto !important;
            }
        }

        /* Harmony 演示样式 */
        .demo-trigger {
            text-align: center;
            margin: 50px 0;
        }

        .demo-btn {
            padding: 20px 40px;
            font-size: 1.3rem;
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.2), rgba(0, 255, 255, 0.1));
            border: 2px solid #00ffff;
            color: #ffffff;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .demo-btn:hover {
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.4), rgba(0, 255, 255, 0.2));
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 255, 255, 0.3);
        }

        .demo-hint {
            color: #888888;
            font-size: 1.1rem;
            margin-top: 15px;
        }

        .demo-container {
            width: 100%;
            /* 基于动态计算的导航安全空间，避免底部导航遮挡 */
            height: calc(100vh - var(--nav-space, 120px) - 40px - env(safe-area-inset-bottom));
            display: flex;
            flex-direction: column;
            gap: 20px;
            animation: slideIn 0.6s ease-out;
        }

        .code-demo {
            flex: 2;
            background: rgba(15, 15, 15, 0.9);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 10px;
            overflow: hidden;
        }

        .demo-header {
            background: rgba(0, 255, 255, 0.1);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(0, 255, 255, 0.3);
        }

        .demo-header h3 {
            color: #00ffff;
            margin: 0;
            font-size: 1.2rem;
        }

        .close-demo {
            background: rgba(255, 100, 100, 0.2);
            border: 1px solid #ff6464;
            color: #ff6464;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .close-demo:hover {
            background: rgba(255, 100, 100, 0.4);
        }

        .code-content {
            padding: 20px;
            overflow-y: auto;
            max-height: 400px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            color: #e0e0e0;
            text-align: left;
            white-space: pre-line;
            -webkit-overflow-scrolling: touch;
        }

        .explanation-panel {
            flex: 1;
            background: rgba(10, 10, 10, 0.9);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 10px;
            padding: 20px;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .explanation-content {
            color: #cccccc;
            line-height: 1.6;
            font-size: 1.2rem;
        }

        .explanation-content h5 {
            font-size: 1.4rem;
        }

        .explanation-content p {
            font-size: 1.2rem;
        }

        /* Harmony 语法高亮样式 */
        .token-start { color: #ff6b6b; cursor: pointer; font-weight: bold; }
        .token-end { color: #ff6b6b; cursor: pointer; font-weight: bold; }
        .token-role { color: #4ecdc4; cursor: pointer; font-weight: bold; }
        .token-channel { color: #45b7d1; cursor: pointer; font-weight: bold; }
        .token-to { color: #96ceb4; cursor: pointer; font-weight: bold; }
        .token-constrain { color: #feca57; cursor: pointer; font-weight: bold; }
        .token-call { color: #ff9ff3; cursor: pointer; font-weight: bold; }
        .token-return { color: #54a0ff; cursor: pointer; font-weight: bold; }
        .function-name { color: #ffa726; cursor: pointer; }
        .json-content { color: #a8e6cf; }
        .message-content { color: #e0e0e0; }

        .clickable:hover {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            padding: 2px 4px;
        }

        .selected {
            background: rgba(0, 255, 255, 0.2) !important;
            border-radius: 3px;
            padding: 2px 4px;
        }

        /* 自定义滚动条样式 */
        .code-content::-webkit-scrollbar {
            width: 6px;
        }

        .code-content::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 3px;
        }

        .code-content::-webkit-scrollbar-thumb {
            background: rgba(0, 255, 255, 0.3);
            border-radius: 3px;
            transition: background 0.3s ease;
        }

        .code-content::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 255, 255, 0.5);
        }

        .explanation-panel::-webkit-scrollbar {
            width: 6px;
        }

        .explanation-panel::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 3px;
        }

        .explanation-panel::-webkit-scrollbar-thumb {
            background: rgba(0, 255, 255, 0.3);
            border-radius: 3px;
            transition: background 0.3s ease;
        }

        .explanation-panel::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 255, 255, 0.5);
        }

        /* 技术栈对比样式 */
        .tech-stack-comparison {
            width: 100%;
            max-width: 1100px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .stack-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 40px;
            margin-bottom: 40px;
        }

        .tech-stack {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .stack-title {
            font-size: 1.5rem;
            color: #cccccc;
            text-align: center;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .left-stack .stack-title {
            color: #ff9999;
        }

        .right-stack .stack-title {
            color: #99ff99;
        }

        .stack-layer {
            background: rgba(20, 20, 20, 0.8);
            border: 2px solid rgba(100, 100, 100, 0.3);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stack-layer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent, rgba(255, 255, 255, 0.05));
            pointer-events: none;
        }

        .stack-layer:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 255, 255, 0.1);
        }

        /* 左侧技术栈颜色 */
        .left-stack .stack-layer {
            border-color: rgba(255, 153, 153, 0.4);
            background: rgba(40, 20, 20, 0.6);
        }

        .left-stack .stack-layer:hover {
            border-color: rgba(255, 153, 153, 0.7);
            box-shadow: 0 8px 25px rgba(255, 153, 153, 0.2);
        }

        /* 右侧技术栈颜色 */
        .right-stack .stack-layer {
            border-color: rgba(153, 255, 153, 0.4);
            background: rgba(20, 40, 20, 0.6);
        }

        .right-stack .stack-layer:hover {
            border-color: rgba(153, 255, 153, 0.7);
            box-shadow: 0 8px 25px rgba(153, 255, 153, 0.2);
        }

        /* 高亮层（格式层） */
        .highlight-layer {
            border-width: 3px !important;
            transform: scale(1.02);
        }

        .left-stack .highlight-layer {
            border-color: rgba(255, 153, 153, 0.8) !important;
            background: rgba(60, 30, 30, 0.8) !important;
            box-shadow: 0 0 20px rgba(255, 153, 153, 0.3);
        }

        .right-stack .highlight-layer {
            border-color: rgba(153, 255, 153, 0.8) !important;
            background: rgba(30, 60, 30, 0.8) !important;
            box-shadow: 0 0 20px rgba(153, 255, 153, 0.3);
        }

        .layer-content {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 8px;
            color: #ffffff;
        }

        .layer-description {
            font-size: 1rem;
            color: #aaaaaa;
            font-weight: 300;
        }

        /* 演进箭头 */
        .evolution-arrow {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            width: 120px;
        }

        .arrow-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .arrow-symbol {
            font-size: 3rem;
            color: #00ffff;
            font-weight: bold;
            text-shadow: 0 0 15px rgba(0, 255, 255, 0.6);
            animation: arrowPulse 2s ease-in-out infinite;
        }

        .arrow-text {
            font-size: 1rem;
            color: #00ffff;
            font-weight: 500;
        }

        @keyframes arrowPulse {
            0%, 100% {
                opacity: 0.8;
                transform: scale(1);
            }
            50% {
                opacity: 1;
                transform: scale(1.1);
            }
        }

        /* 核心洞察 */
        .core-insight {
            text-align: center;
            margin-top: 40px;
        }

        .core-insight p {
            margin: 0;
            font-size: 1.5rem;
            font-weight: bold;
            line-height: 1.4;
        }

        .insight-normal {
            color: #ffffff;
        }

        .insight-highlight {
            color: #ff4444;
            font-size: 1.7rem;
            text-shadow: 0 0 15px rgba(255, 68, 68, 0.4);
        }

        .highlight-text {
            color: #00ffff;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.4);
        }

        /* 响应式设计 */
        @media (max-width: 900px) {
            .stack-container {
                flex-direction: column;
                gap: 30px;
            }

            .evolution-arrow {
                width: auto;
                transform: rotate(90deg);
            }

            .arrow-symbol {
                font-size: 2.5rem;
            }

            .tech-stack {
                width: 100%;
                max-width: 500px;
            }
        }

        @media (max-width: 600px) {
            .tech-stack-comparison {
                padding: 20px 10px;
            }

            .stack-layer {
                padding: 15px;
            }

            .layer-content {
                font-size: 1.1rem;
            }

            .layer-description {
                font-size: 0.9rem;
            }
        }

        /* 第5页：迁移建议块样式 */
        .migration-wrap {
            max-width: 1000px;
            margin: 20px auto 0 auto;
            padding: 0 20px;
        }
        .migration-title {
            color: #00ffff;
            text-align: center;
            margin-bottom: 14px;
            font-size: 1.4rem;
        }
        .migration-list {
            margin-top: 10px;
        }
        .ref-note {
            color: #a7cbd6;
            text-align: center;
            margin-top: 10px;
            font-size: 0.95rem;
        }
        .ref-link {
            color: #58e0ff;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <!-- 轻柔的粒子背景 -->
    <div class="particles" id="particles"></div>

    <!-- 轻柔的网格背景 -->
    <div class="grid-background"></div>

    <!-- 页码指示器已移动至底部导航中间 -->

    <!-- 主容器 -->
    <div class="container">
        <!-- 第1页：标题页 -->
        <div class="page active" id="page1">
            <div class="main-title">
                <div class="highlight">GPT-OSS</div>
                <div class="highlight">深度解析</div>
            </div>
            <div class="intro-meta">
                <div class="ppt-hint">使用左右方向键或滑动进行翻页</div>
                <div class="resource-links">
                    <a class="link-btn" href="https://github.com/openai/gpt-oss" target="_blank" rel="noopener noreferrer">🐙 GitHub：openai/gpt-oss</a>
                    <a class="link-btn" href="https://openai.com/index/introducing-gpt-oss/" target="_blank" rel="noopener noreferrer">📰 OpenAI Blog：Introducing GPT‑OSS</a>
                    <a class="link-btn" href="https://gpt-oss.com/" target="_blank" rel="noopener noreferrer">🕹️ GPT‑OSS Playground</a>
                    <a class="link-btn" href="https://cookbook.openai.com/articles/openai-harmony" target="_blank" rel="noopener noreferrer">🧑‍🍳 Harmony Cookbook</a>
                </div>
            </div>
        </div>

        <!-- 第2页：提纲 -->
        <div class="page" id="page2">
            <h1 class="page-title">提纲</h1>
            <div class="outline-grid" role="list">
                <a class="outline-card" href="#3" role="listitem" aria-label="gpt-oss 系列被低估了">
                    <span class="outline-icon">📉</span>
                    <span>
                        <span class="outline-title">gpt-oss 系列被低估了</span>
                        <span class="outline-desc">从 ChatML 到 Harmony 的技术栈演进</span>
                    </span>
                    <span class="outline-chevron">›</span>
                </a>
                <a class="outline-card" href="#4" role="listitem" aria-label="Harmony 格式（演示）">
                    <span class="outline-icon">🧩</span>
                    <span>
                        <span class="outline-title">Harmony 格式（演示）</span>
                        <span class="outline-desc">多通道标记、工具调用与返回流程</span>
                    </span>
                    <span class="outline-chevron">›</span>
                </a>
                <a class="outline-card" href="#5" role="listitem" aria-label="Harmony vs ChatML">
                    <span class="outline-icon">⚖️</span>
                    <span>
                        <span class="outline-title">Harmony vs ChatML</span>
                        <span class="outline-desc">标记、通道、约束与工具调用的差异</span>
                    </span>
                    <span class="outline-chevron">›</span>
                </a>
                <a class="outline-card" href="#6" role="listitem" aria-label="自研 AgentML 渲染器路线（Harmony 启发）">
                    <span class="outline-icon">🛠️</span>
                    <span>
                        <span class="outline-title">自研 AgentML 渲染器路线</span>
                        <span class="outline-desc">不绑定 tokenizer/官方渲染器，Harmony 启发的多通道设计</span>
                    </span>
                    <span class="outline-chevron">›</span>
                </a>

            </div>
        </div>

        <!-- 第3页：gpt-oss 系列被低估了 -->
        <div class="page" id="page3">
            <h1 class="page-title">gpt-oss 系列被低估了</h1>

            <!-- 技术栈对比图 -->
            <div class="tech-stack-comparison">
                <div class="stack-container">
                    <!-- 左侧 - 过去的技术栈 (ChatML) -->
                    <div class="tech-stack left-stack">
                        <h3 class="stack-title">过去的 AI 技术栈</h3>
                        <div class="stack-layer layer-4">
                            <div class="layer-content">Chat Bot</div>
                            <div class="layer-description">简单对话机器人</div>
                        </div>
                        <div class="stack-layer layer-3">
                            <div class="layer-content">Completion API</div>
                            <div class="layer-description">基础文本生成</div>
                        </div>
                        <div class="stack-layer layer-2 highlight-layer">
                            <div class="layer-content">ChatML 格式</div>
                            <div class="layer-description">简单消息格式</div>
                        </div>
                        <div class="stack-layer layer-1">
                            <div class="layer-content">指令模型</div>
                            <div class="layer-description">Follow Instructions</div>
                        </div>
                    </div>

                    <!-- 中间箭头 -->
                    <div class="evolution-arrow">
                        <div class="arrow-content">
                            <span class="arrow-symbol">→</span>
                            <span class="arrow-text">技术演进</span>
                        </div>
                    </div>

                    <!-- 右侧 - 现在的技术栈 (Harmony) -->
                    <div class="tech-stack right-stack">
                        <h3 class="stack-title">现在的 AI 技术栈</h3>
                        <div class="stack-layer layer-4">
                            <div class="layer-content">AI Agent</div>
                            <div class="layer-description">智能决策与执行</div>
                        </div>
                        <div class="stack-layer layer-3">
                            <div class="layer-content">Response API</div>
                            <div class="layer-description">结构化响应接口</div>
                        </div>
                        <div class="stack-layer layer-2 highlight-layer">
                            <div class="layer-content">Harmony 格式</div>
                            <div class="layer-description">多通道架构</div>
                        </div>
                        <div class="stack-layer layer-1">
                            <div class="layer-content">思维模型 (GPT-OSS)</div>
                            <div class="layer-description">Reasoning & Planning</div>
                        </div>
                    </div>
                </div>

                <!-- 底部说明 -->
                <div class="core-insight">
                    <p><span class="insight-normal">GPT-OSS 是 Agent 时代的</span><span class="insight-highlight">第一个开源技术栈</span></p>
                </div>
            </div>
        </div>

        <!-- 第4页：Harmony 动态演示 -->
        <div class="page" id="page4">
            <h1 class="page-title">Harmony 格式</h1>

            <!-- 演示触发按钮 -->
            <div class="demo-trigger">
             <button class="demo-btn" onclick="startHarmonyDemo()" aria-label="开始 Harmony 演示">
                 ▶️ Harmony 演示
             </button>
                <p class="demo-hint">体验新一代对话格式的多通道架构</p>
            </div>

            <!-- 演示内容区域 默认隐藏 -->
            <div class="demo-container" id="harmonyDemoContainer" hidden>
                <!-- 代码演示区 -->
                <div class="code-demo">
                    <div class="demo-header">
                        <h3>天气查询 + 智能提醒场景</h3>
                        <button class="close-demo" onclick="closeHarmonyDemo()">×</button>
                    </div>
                    <div class="code-content" id="harmonyCodeContent">
                        <!-- Harmony 代码将在这里动态生成 -->
                    </div>
                </div>

                <!-- 解释区域 -->
                <div class="explanation-panel" id="explanationPanel">
                    <div class="explanation-content" id="explanationContent">
                        <p>👆 选择代码中的任意彩色标记来了解 Harmony 格式的不同组件</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 第5页：Harmony vs ChatML -->
        <div class="page" id="page5">
            <div class="tech-stack-comparison">
                <div class="stack-container">
                    <!-- 左侧 - ChatML（传统） -->
                    <div class="tech-stack left-stack">
                        <h3 class="stack-title">ChatML（传统）</h3>
                        <div class="stack-layer">
                            <div class="layer-content">标记与结构</div>
                            <div class="layer-description">使用 &lt;|im_start|&gt; / &lt;|im_end|&gt;，单一消息体；边界清晰但语义单一</div>
                        </div>
                        <div class="stack-layer highlight-layer">
                            <div class="layer-content">通道</div>
                            <div class="layer-description">无显式多通道；思考、工具交互、最终回复混杂在同一通道</div>
                        </div>
                        <div class="stack-layer">
                            <div class="layer-content">工具调用</div>
                            <div class="layer-description">常以内嵌 JSON / function_call 或 tool 角色承载，结构松散、校验难</div>
                        </div>
                        <div class="stack-layer">
                            <div class="layer-content">路由与约束</div>
                            <div class="layer-description">缺少 to= 精确路由与输出约束；难以强制 JSON/Schema 合规</div>
                        </div>
                    </div>

                    <!-- 中间箭头 -->
                    <div class="evolution-arrow">
                        <div class="arrow-content">
                            <span class="arrow-symbol">→</span>
                            <span class="arrow-text">核心差异</span>
                        </div>
                    </div>

                    <!-- 右侧 - Harmony（现代） -->
                    <div class="tech-stack right-stack">
                        <h3 class="stack-title">Harmony（现代）</h3>
                        <div class="stack-layer">
                            <div class="layer-content">标记与结构</div>
                            <div class="layer-description">&lt;|start|&gt; / &lt;|end|&gt; + &lt;|message|&gt; 明确消息体，语义更细分</div>
                        </div>
                        <div class="stack-layer highlight-layer">
                            <div class="layer-content">通道</div>
                            <div class="layer-description">analysis / commentary / final 多通道：可观测、可调试、可策略化</div>
                        </div>
                        <div class="stack-layer">
                            <div class="layer-content">工具调用</div>
                            <div class="layer-description">commentary 通道 + to=functions.xx + &lt;|constrain|&gt; json + &lt;|call|&gt;；返回 to=assistant</div>
                        </div>
                        <div class="stack-layer">
                            <div class="layer-content">路由与约束</div>
                            <div class="layer-description">to= 精确路由，&lt;|constrain|&gt; 强约束输出；&lt;|return|&gt; 明确流程终点</div>
                        </div>
                    </div>
                </div>

                <!-- 底部结论 -->
                <div class="core-insight">
                    <p><span class="insight-normal">Harmony 不只是“新提示格式”，而是</span><span class="insight-highlight">面向 Agent 的多通道协议</span><span class="insight-normal">：更可观测、更易验证、更便于编排</span></p>
                </div>
            </div>
        </div>

        <!-- 第6页：自研 AgentML 渲染器（Harmony 启发） -->
        <div class="page" id="page6">
            <h1 class="page-title">自研 AgentML 渲染器（Harmony 启发）</h1>
            <div class="subtitle">批判式学习 · 不绑定官方实现 · 构建可验证的多通道协议</div>
            <div class="insight-grid">
                <div class="insight-card cyan">
                    <div class="insight-title">1) 格式即架构：以通道解耦职责</div>
                    <div class="insight-body">
                        通过 <span class="kw kw-cyan">analysis</span> / <span class="kw kw-cyan">commentary</span> / <span class="kw kw-cyan">final</span> 多通道，将 <span class="kw kw-amber">思考</span>、<span class="kw kw-blue">工具交互</span> 与 <span class="kw kw-green">用户输出</span> 解耦；协议清晰，可观测、可编排。
                    </div>
                </div>

                <div class="insight-card red">
                    <div class="insight-title">2) 渲染与分词解耦：保持可替换</div>
                    <div class="insight-body">
                        自研 <span class="kw kw-purple">AST</span>/<span class="kw kw-purple">Renderer</span>，不绑定官方渲染器与 <span class="kw kw-red">Tokenizer</span>；以 <span class="kw kw-green">方言适配</span> 兼容 Harmony/ChatML，兼顾跨模型与长期演进。
                    </div>
                </div>

                <div class="insight-card green">
                    <div class="insight-title">3) 精准路由与强约束：降低错误面</div>
                    <div class="insight-body">
                        用 <span class="kw kw-blue">to=</span> 精准路由工具/系统，用 <span class="kw kw-amber">constrain json</span> 强约束输出遵循 <span class="kw kw-amber">Schema</span>，减少解析错误与粘合代码。
                    </div>
                </div>

                <div class="insight-card purple">
                    <div class="insight-title">4) 有状态与可观测：可回放的轨迹</div>
                    <div class="insight-body">
                        为各通道输出统一事件流，形成 <span class="kw kw-green">有状态</span>、可调试、可回放的 <span class="kw kw-cyan">Execution Trace</span>，助力定位与优化策略。
                    </div>
                </div>

                <div class="insight-card yellow">
                    <div class="insight-title">5) 工具编排 Runtime：幂等与重试</div>
                    <div class="insight-body">
                        在 <span class="kw kw-cyan">commentary</span> 执行 <span class="kw kw-blue">&lt;|call|&gt;</span>，返回强制 <span class="kw kw-blue">to=assistant</span>；内建 <span class="kw kw-amber">幂等</span>/<span class="kw kw-amber">重试</span> 策略，保障稳定与可恢复。
                    </div>
                </div>

                <div class="insight-card blue">
                    <div class="insight-title">6) 兼容与桥接：数据与生态复用</div>
                    <div class="insight-body">
                        保留 <span class="kw kw-purple">ChatML ↔ AgentML</span> 互转与 <span class="kw kw-red">Tokenizer</span> 边界 <span class="kw kw-green">Normalization</span>，平滑复用现有数据与工具链。
                    </div>
                </div>
            </div>
        </div>

        <!-- 第7页：对AI开发者的意义（原第6页） -->
        <div class="page" id="page7">
            <h1 class="page-title">对 AI 开发者的意义</h1>
             <div class="tech-stack-comparison">
                <div class="stack-container">
                    <!-- 左侧 - 现状 -->
                    <div class="tech-stack left-stack">
                        <h3 class="stack-title">现状：屎上雕花</h3>
                        <div class="stack-layer layer-3">
                            <div class="layer-content">Fake Agent</div>
                            <div class="layer-description">基于无状态服务的伪Agent</div>
                        </div>
                        <div class="stack-layer layer-2 highlight-layer">
                            <div class="layer-content">Completion API</div>
                            <div class="layer-description">无状态文本补全接口</div>
                        </div>
                        <div class="stack-layer layer-1">
                            <div class="layer-content">指令模型</div>
                            <div class="layer-description">单次响应，无深度思考</div>
                        </div>
                    </div>

                    <!-- 中间箭头 -->
                    <div class="evolution-arrow">
                        <div class="arrow-content">
                            <span class="arrow-symbol">→</span>
                            <span class="arrow-text">真正演进</span>
                        </div>
                    </div>

                    <!-- 右侧 - 应该采用的架构 -->
                    <div class="tech-stack right-stack">
                        <h3 class="stack-title">未来：真正智能</h3>
                        <div class="stack-layer layer-3">
                            <div class="layer-content">Real Agent</div>
                            <div class="layer-description">基于有状态服务的真Agent</div>
                        </div>
                        <div class="stack-layer layer-2 highlight-layer">
                            <div class="layer-content">Advanced API + Stateful</div>
                            <div class="layer-description">结构化响应 + 有状态服务</div>
                        </div>
                        <div class="stack-layer layer-1">
                            <div class="layer-content">思维模型 (GPT-OSS)</div>
                            <div class="layer-description">多轮思考 + 工具调用优化</div>
                        </div>
                    </div>
                </div>

                <!-- 底部说明 -->
                <div class="core-insight">
                    <p><span class="insight-normal">不仅是 API 设计的改进，更是</span><span class="insight-highlight">架构范式</span><span class="insight-normal">的转变</span></p>
                    <p style="margin-top: 20px; font-size: 1.3rem;">状态(stateful context) : 对话记录 、工具、 记忆 、 MCP... </p>
                </div>
            </div>
        </div>

        <!-- 第8页：我们的思考（原第7页） -->
        <div class="page" id="page8">
            <h1 class="page-title">我们的思考</h1>
            <div style="text-align: center; padding: 50px; font-size: 2.5rem; line-height: 1.6;">
                <p style="margin-bottom: 40px;">
                    <span style="display: block; color: #ffffff;">不是要完全投入 OpenAI 的技术栈</span>
                </p>
                <p style="margin-bottom: 40px;">
                    <span style="display: block; color: #00ffff;">而是要思考和设计</span>
                    <span style="display: block; color: #ff4444; font-size: 3rem; margin-top: 20px;">适合 Agent 时代的 API 和底层模型</span>
                </p>
                <p>
                    <span style="display: block; color: #ffffff; font-size: 2rem;">gpt-oss 是值得我们去参考和研究的模型</span>
                </p>
            </div>
        </div>

        <!-- 第9页：观点总结（原第8页） -->
        <div class="page" id="page9">
            <h1 class="page-title">观点总结</h1>

            <div style="max-width: 1100px; margin: 0 auto; padding: 40px 20px; font-size: 1.3rem; line-height: 1.6; text-align: left;">
                <!-- 三个核心观点 -->
                <div style="display: flex; flex-direction: column; gap: 35px;">

                    <!-- 观点1 -->
                    <div style="background: rgba(255, 153, 153, 0.1); border-left: 5px solid #ff9999; padding: 25px 30px; border-radius: 0 12px 12px 0;">
                        <h3 style="color: #ff9999; margin-top: 0; margin-bottom: 15px; font-size: 1.4rem;">1. 测评时机很重要</h3>
                        <p style="margin: 0; color: #ffffff; font-size: 1.2rem; line-height: 1.5;">
                            在各大框架没有完美支持 gpt-oss 前不要测评，也不要有结论
                        </p>
                        <p style="margin: 15px 0 0 0; color: #cccccc; font-size: 1rem;">
                            新格式需要生态完善，过早评判可能错失机会
                        </p>
                    </div>

                    <!-- 观点2 -->
                    <div style="background: rgba(153, 255, 153, 0.1); border-left: 5px solid #99ff99; padding: 25px 30px; border-radius: 0 12px 12px 0;">
                        <h3 style="color: #99ff99; margin-top: 0; margin-bottom: 15px; font-size: 1.4rem;">2. Agent 时代的开源技术栈</h3>
                        <p style="margin: 0; color: #ffffff; font-size: 1.2rem; line-height: 1.5;">
                            GPT OSS + Harmony 是一个 Agent 时代的开源技术栈，更适合做方向探索，学习用
                        </p>
                        <p style="margin: 15px 0 0 0; color: #cccccc; font-size: 1rem;">
                            不是为了直接部署，而是为了理解未来架构
                        </p>
                    </div>

                    <!-- 观点3（由原底部强调移入） -->
                    <div style="background: rgba(153, 153, 255, 0.1); border-left: 5px solid #9999ff; padding: 25px 30px; border-radius: 0 12px 12px 0;">
                        <h3 style="color: #9999ff; margin-top: 0; margin-bottom: 15px; font-size: 1.4rem;">3. 格式即架构</h3>
                        <p style="margin: 0; color: #ffffff; font-size: 1.2rem; line-height: 1.5;">
                            关键在于理解 <span style="color: #ff4444;">格式即架构</span> 的深层含义
                        </p>
                        <p style="margin: 15px 0 0 0; color: #cccccc; font-size: 1rem;">
                            Harmony 不只是一种数据格式，更是一种思维方式
                        </p>
                    </div>
                </div>


            </div>
        </div>

    <!-- 第10页：Finale（原第9页） -->
        <div class="page" id="page10">
            <div class="module-content">
                <div class="finale-wrap">
                    <div class="finale-ring" aria-hidden="true"></div>
                    <h1 class="finale-title">感谢观看</h1>
                    <div class="finale-divider"></div>
                    <div style="margin-top:24px; max-width:900px; margin-left:auto; margin-right:auto; text-align:center; line-height:1.7; color:#e8faff;">
                        <p class="finale-subtitle">本次分享围绕 GPT-OSS 与 Harmony 格式，强调“格式即架构”：从 ChatML 的消息格式，演进到多通道架构与有状态服务，真正服务于 Agent 时代。</p>
                        <p class="finale-note" style="margin-top:12px;">以更清晰的接口、更简洁的约束、更可观测的过程，构建有用的智能系统。</p>
                    </div>
                    <div class="finale-actions" style="margin-top:28px;">
                        <button class="btn primary go-slide-btn" data-go="1" aria-label="返回首页">返回首页</button>
                        <button class="btn go-slide-btn" data-go="2" aria-label="回到目录">回到目录</button>
                        <button class="btn copy-current-url" title="复制当前链接" aria-label="复制当前链接">复制链接</button>
                        <a class="btn" href="https://linxueyuan.online/ppt" target="_blank" rel="noopener noreferrer">PPT 目录</a>
                    </div>
                    <div style="margin-top:18px; font-size:0.95rem; color:#a7cbd6; text-align:center;">
                        作者：<span style="font-weight:600; color:#d4eef5;">兮尘</span> · 主页：
                        <a href="https://linxueyuan.online/" target="_blank" rel="noopener noreferrer" style="color:#58e0ff; text-decoration:none;">https://linxueyuan.online/</a>
                    </div>
                </div>
            </div>
        </div>

    </div>



    <!-- 导航按钮 -->
    <div class="navigation" role="navigation" aria-label="演示分页导航">
        <button class="nav-btn" type="button" id="prevBtn" onclick="previousPage()" aria-label="上一页">上一页</button>
        <span class="page-indicator" aria-live="polite" aria-atomic="true">
            <span id="currentPage">1</span>/<span id="totalPages">10</span>
        </span>
        <button class="nav-btn" type="button" id="nextBtn" onclick="nextPage()" aria-label="下一页">下一页</button>
    </div>

    <script>
        let currentPageIndex = 1;
    const totalPages = 10;
        const prefersReducedMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        const isMobile = window.matchMedia && window.matchMedia('(max-width: 768px)').matches;

        // 创建轻柔的粒子效果
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            // 根据设备与用户偏好动态设置粒子数量
            const particleCount = prefersReducedMotion ? 0 : (isMobile ? 25 : 50);

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');

                // 随机选择粒子大小
                const sizeRandom = Math.random();
                if (sizeRandom < 0.3) {
                    particle.className = 'particle small';
                } else if (sizeRandom < 0.7) {
                    particle.className = 'particle';
                } else {
                    particle.className = 'particle large';
                }

                // 随机水平位置
                const leftPos = Math.random() * 100;
                particle.style.left = leftPos + '%';

                // 设置随机的水平偏移CSS变量
                const randomX = (Math.random() - 0.5) * 200; // -100px 到 100px
                particle.style.setProperty('--random-x', randomX + 'px');

                // 随机动画延迟
                particle.style.animationDelay = Math.random() * 12 + 's';

                // 稍微变化的动画持续时间
                particle.style.animationDuration = (Math.random() * 4 + 10) + 's';

                particlesContainer.appendChild(particle);
            }
        }

        // 页面切换函数
        function showPage(pageIndex) {
            // 隐藏所有页面
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.classList.remove('active'));



            // 显示目标页面
            const targetPage = document.getElementById(`page${pageIndex}`);
            if (targetPage) {
                targetPage.classList.add('active');
                currentPageIndex = pageIndex;
                updateNavigation();
                updatePageIndicator();
                // 同步地址栏 hash，便于分享与直接跳转
                if (location.hash !== '#' + pageIndex) {
                    history.replaceState(null, '', '#' + pageIndex);
                }
                // 更新标题以包含页码信息（不改变原始标题语义）
                try {
                    const baseTitle = 'GPT-OSS 深度解析';
                    document.title = `${baseTitle}（${currentPageIndex}/${totalPages}）`;
                } catch (e) { /* no-op */ }

                // 第3页不需要特殊加载逻辑
            }
        }



        // Harmony 演示相关函数
        function startHarmonyDemo() {
            document.querySelector('.demo-trigger').style.display = 'none';
            const container = document.getElementById('harmonyDemoContainer');
            container.hidden = false;
            generateHarmonyCode();
        }

        function closeHarmonyDemo() {
            document.querySelector('.demo-trigger').style.display = 'block';
            const container = document.getElementById('harmonyDemoContainer');
            container.hidden = true;
        }

        function generateHarmonyCode() {
            const harmonyExample = `<span class="token-start clickable" data-explanation="start">&lt;|start|&gt;</span><span class="token-role clickable" data-explanation="user">user</span><span class="token-start clickable" data-explanation="message">&lt;|message|&gt;</span>明天北京天气怎么样？如果下雨请提醒我带伞。<span class="token-end clickable" data-explanation="end">&lt;|end|&gt;</span>

<span class="token-start clickable" data-explanation="start">&lt;|start|&gt;</span><span class="token-role clickable" data-explanation="assistant">assistant</span><span class="token-channel clickable" data-explanation="analysis">&lt;|channel|&gt;</span><span class="token-channel clickable" data-explanation="analysis">analysis</span><span class="token-start clickable" data-explanation="message">&lt;|message|&gt;</span>
用户询问明天北京的天气情况，并且需要根据天气情况决定是否设置带伞提醒。
这是一个典型的条件判断场景：
1. 先查询天气
2. 根据降雨情况决定是否设置提醒
<span class="token-end clickable" data-explanation="end">&lt;|end|&gt;</span>

<span class="token-start clickable" data-explanation="start">&lt;|start|&gt;</span><span class="token-role clickable" data-explanation="assistant">assistant</span><span class="token-channel clickable" data-explanation="commentary">&lt;|channel|&gt;</span><span class="token-channel clickable" data-explanation="commentary">commentary</span><span class="token-start clickable" data-explanation="message">&lt;|message|&gt;</span>我来帮您查询明天北京的天气情况。<span class="token-end clickable" data-explanation="end">&lt;|end|&gt;</span>

<span class="token-start clickable" data-explanation="start">&lt;|start|&gt;</span><span class="token-role clickable" data-explanation="assistant">assistant</span><span class="token-channel clickable" data-explanation="commentary">&lt;|channel|&gt;</span><span class="token-channel clickable" data-explanation="commentary">commentary</span> <span class="token-to clickable" data-explanation="to">to=</span><span class="function-name clickable" data-explanation="function">functions.get_weather</span><span class="token-constrain clickable" data-explanation="constrain">&lt;|constrain|&gt;</span><span class="token-constrain clickable" data-explanation="json">json</span><span class="token-start clickable" data-explanation="message">&lt;|message|&gt;</span><span class="json-content">{"city": "北京", "date": "明天"}</span><span class="token-call clickable" data-explanation="call">&lt;|call|&gt;</span>

<span class="token-start clickable" data-explanation="start">&lt;|start|&gt;</span><span class="function-name clickable" data-explanation="function_return">functions.get_weather</span> <span class="token-to clickable" data-explanation="to_assistant">to=assistant</span><span class="token-channel clickable" data-explanation="commentary">&lt;|channel|&gt;</span><span class="token-channel clickable" data-explanation="commentary">commentary</span><span class="token-start clickable" data-explanation="message">&lt;|message|&gt;</span><span class="json-content">{"temperature": 15, "condition": "rainy", "precipitation": "80%", "forecast": "明天有小雨"}</span><span class="token-end clickable" data-explanation="end">&lt;|end|&gt;</span>

<span class="token-start clickable" data-explanation="start">&lt;|start|&gt;</span><span class="token-role clickable" data-explanation="assistant">assistant</span><span class="token-channel clickable" data-explanation="analysis">&lt;|channel|&gt;</span><span class="token-channel clickable" data-explanation="analysis">analysis</span><span class="token-start clickable" data-explanation="message">&lt;|message|&gt;</span>
天气查询结果显示明天北京有小雨，降水概率80%。
根据条件判断，需要设置带伞提醒。
<span class="token-end clickable" data-explanation="end">&lt;|end|&gt;</span>

<span class="token-start clickable" data-explanation="start">&lt;|start|&gt;</span><span class="token-role clickable" data-explanation="assistant">assistant</span><span class="token-channel clickable" data-explanation="commentary">&lt;|channel|&gt;</span><span class="token-channel clickable" data-explanation="commentary">commentary</span> <span class="token-to clickable" data-explanation="to">to=</span><span class="function-name clickable" data-explanation="function">functions.set_reminder</span><span class="token-constrain clickable" data-explanation="constrain">&lt;|constrain|&gt;</span><span class="token-constrain clickable" data-explanation="json">json</span><span class="token-start clickable" data-explanation="message">&lt;|message|&gt;</span><span class="json-content">{"time": "明天早上8点", "message": "记得带伞，明天北京有雨", "priority": "medium"}</span><span class="token-call clickable" data-explanation="call">&lt;|call|&gt;</span>

<span class="token-start clickable" data-explanation="start">&lt;|start|&gt;</span><span class="function-name clickable" data-explanation="function_return">functions.set_reminder</span> <span class="token-to clickable" data-explanation="to_assistant">to=assistant</span><span class="token-channel clickable" data-explanation="commentary">&lt;|channel|&gt;</span><span class="token-channel clickable" data-explanation="commentary">commentary</span><span class="token-start clickable" data-explanation="message">&lt;|message|&gt;</span><span class="json-content">{"status": "success", "reminder_id": "R12345"}</span><span class="token-end clickable" data-explanation="end">&lt;|end|&gt;</span>

<span class="token-start clickable" data-explanation="start">&lt;|start|&gt;</span><span class="token-role clickable" data-explanation="assistant">assistant</span><span class="token-channel clickable" data-explanation="final">&lt;|channel|&gt;</span><span class="token-channel clickable" data-explanation="final">final</span><span class="token-start clickable" data-explanation="message">&lt;|message|&gt;</span>根据查询结果，明天北京有小雨，气温15°C，降水概率80%。

我已经为您设置了明天早上8点的提醒："记得带伞，明天北京有雨"。

建议您准备一把雨伞，祝您出行顺利！☔<span class="token-return clickable" data-explanation="return">&lt;|return|&gt;</span>`;

            document.getElementById('harmonyCodeContent').innerHTML = harmonyExample;
            addClickEventListeners();
        }

        function addClickEventListeners() {
            const clickableElements = document.querySelectorAll('.clickable');
            clickableElements.forEach(element => {
                element.addEventListener('click', function() {
                    // 移除之前的选中状态
                    document.querySelectorAll('.selected').forEach(el => el.classList.remove('selected'));

                    // 添加选中状态
                    this.classList.add('selected');

                    // 显示解释
                    const explanation = this.getAttribute('data-explanation');
                    showExplanation(explanation);
                });
            });
        }

        function showExplanation(type) {
            const explanations = {
                'start': {
                    title: '&lt;|start|&gt; - 消息开始标记',
                    content: 'Harmony格式中每个消息块的开始标记。与ChatML的&lt;|im_start|&gt;类似，但更简洁。'
                },
                'end': {
                    title: '&lt;|end|&gt; - 消息结束标记',
                    content: 'Harmony格式中每个消息块的结束标记。与ChatML的&lt;|im_end|&gt;对应。'
                },
                'message': {
                    title: '&lt;|message|&gt; - 消息内容标记',
                    content: '标记实际的消息内容开始。在此标记之后的内容是真正的消息文本。'
                },
                'user': {
                    title: 'user - 用户角色',
                    content: '表示这个消息来自用户。类似ChatML中的user角色，但在Harmony中是消息路由的一部分。'
                },
                'assistant': {
                    title: 'assistant - 助手角色',
                    content: '表示这个消息来自AI助手。在Harmony中，assistant可以通过不同通道发送多种类型的消息。'
                },
                'analysis': {
                    title: 'analysis通道 - 思考分析',
                    content: '模型的内部思考和分析过程。这个通道让模型的推理过程变得透明可观测，方便调试和理解。'
                },
                'commentary': {
                    title: 'commentary通道 - 工具交互',
                    content: '用于工具调用和与外部系统交互的通道。模型可以在这个通道中调用函数并接收结果。'
                },
                'final': {
                    title: 'final通道 - 最终回复',
                    content: '给用户的最终回复内容。这是用户会看到的最终答案，与内部思考过程分离。'
                },
                'to': {
                    title: 'to= - 消息路由',
                    content: '指定消息的目标接收者。可以路由到特定的函数或系统组件，实现精确的消息传递。'
                },
                'constrain': {
                    title: '&lt;|constrain|&gt; - 格式约束',
                    content: '约束输出的格式类型。例如"json"表示输出必须是有效的JSON格式，确保数据的结构化。'
                },
                'json': {
                    title: 'json - JSON格式约束',
                    content: '指定输出内容必须符合JSON格式。这确保了工具调用参数的正确性和可解析性。'
                },
                'call': {
                    title: '&lt;|call|&gt; - 函数调用',
                    content: '执行函数调用的标记。在此标记前的JSON内容会作为参数传递给指定的函数。'
                },
                'return': {
                    title: '&lt;|return|&gt; - 返回结果',
                    content: '标记最终返回给用户的内容结束。表示整个处理流程完成，用户将看到final通道的内容。'
                },
                'function': {
                    title: 'functions.xxx - 函数名称',
                    content: '具体的函数名称，如get_weather或set_reminder。这些是可调用的工具函数。'
                },
                'function_return': {
                    title: '函数返回 - 工具执行结果',
                    content: '函数执行后返回的结果。工具完成任务后会将结果发送回assistant进行后续处理。'
                },
                'to_assistant': {
                    title: 'to=assistant - 返回给助手',
                    content: '工具执行结果返回给assistant的路由标记。表示工具已完成任务，结果可供模型使用。'
                }
            };

            const explanation = explanations[type];
            if (explanation) {
                document.getElementById('explanationContent').innerHTML = `
                    <h5 style="color: #00ffff; margin-bottom: 10px;">${explanation.title}</h5>
                    <p>${explanation.content}</p>
                `;
            }
        }



        // 下一页
        function nextPage() {
            if (currentPageIndex < totalPages) {
                showPage(currentPageIndex + 1);
            }
        }

        // 上一页
        function previousPage() {
            if (currentPageIndex > 1) {
                showPage(currentPageIndex - 1);
            }
        }

        // 更新导航按钮状态
        function updateNavigation() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');

            prevBtn.disabled = currentPageIndex === 1;
            nextBtn.disabled = currentPageIndex === totalPages;
        }

        // 更新页码指示器
        function updatePageIndicator() {
            document.getElementById('currentPage').textContent = currentPageIndex;
            document.getElementById('totalPages').textContent = totalPages;
        }

        // 键盘导航
        document.addEventListener('keydown', function(event) {
            if (event.key === 'ArrowLeft') {
                previousPage();
            } else if (event.key === 'ArrowRight') {
                nextPage();
            }
        });

        // 触控滑动导航（移动端）
        (function addTouchNavigation() {
            let touchStartX = null;
            let touchStartY = null;
            const threshold = 50; // 横向滑动阈值
            document.addEventListener('touchstart', function(e) {
                if (!e.touches || e.touches.length === 0) return;
                touchStartX = e.touches[0].clientX;
                touchStartY = e.touches[0].clientY;
            }, { passive: true });
            document.addEventListener('touchend', function(e) {
                if (touchStartX === null || touchStartY === null) return;
                const touchEndX = (e.changedTouches && e.changedTouches[0]) ? e.changedTouches[0].clientX : touchStartX;
                const touchEndY = (e.changedTouches && e.changedTouches[0]) ? e.changedTouches[0].clientY : touchStartY;
                const dx = touchEndX - touchStartX;
                const dy = touchEndY - touchStartY;
                // 忽略垂直滚动为主的手势
                if (Math.abs(dx) > Math.abs(dy) && Math.abs(dx) > threshold) {
                    if (dx < 0) {
                        nextPage();
                    } else {
                        previousPage();
                    }
                }
                touchStartX = touchStartY = null;
            }, { passive: true });
        })();

        // 根据 hash 跳转到指定页，支持 #3 或 #page=3
        function parseHashToPageIndex() {
            const hash = (location.hash || '').replace('#', '').trim();
            if (!hash) return 1;
            if (hash.startsWith('page=')) {
                const v = parseInt(hash.split('=')[1], 10);
                return Number.isFinite(v) ? Math.min(Math.max(v, 1), totalPages) : 1;
            }
            const n = parseInt(hash, 10);
            return Number.isFinite(n) ? Math.min(Math.max(n, 1), totalPages) : 1;
        }

        window.addEventListener('hashchange', function() {
            const target = parseHashToPageIndex();
            if (target !== currentPageIndex) {
                showPage(target);
            }
        });

        // 动态计算底部导航占用空间，避免演示容器被遮挡
        function updateNavSpaceVar() {
            try {
                const nav = document.querySelector('.navigation');
                if (!nav) return;
                const rect = nav.getBoundingClientRect();
                const styles = window.getComputedStyle(nav);
                const bottomOffset = parseFloat(styles.bottom) || 0; // 如 30px
                const navSpace = rect.height + bottomOffset + 10; // 适度留白 10px
                document.documentElement.style.setProperty('--nav-space', navSpace + 'px');
            } catch (_) { /* no-op */ }
        }

        window.addEventListener('resize', updateNavSpaceVar);

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 减少动态偏好时，避免创建粒子
            if (!prefersReducedMotion) {
                createParticles();
            }
            updateNavSpaceVar();
            const initial = parseHashToPageIndex();
            showPage(initial);

            // Finale 页按钮事件
            document.querySelectorAll('.go-slide-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const go = parseInt(btn.getAttribute('data-go'), 10);
                    if (Number.isFinite(go) && go >= 1 && go <= totalPages) {
                        showPage(go);
                    } else if (go === 0) {
                        showPage(1); // 兼容 data-go="0" 的写法
                    }
                });
            });

            const copyBtn = document.querySelector('.copy-current-url');
            if (copyBtn) {
                copyBtn.addEventListener('click', async () => {
                    const text = location.href;
                    try {
                        if (navigator.clipboard && navigator.clipboard.writeText) {
                            await navigator.clipboard.writeText(text);
                        } else {
                            const ta = document.createElement('textarea');
                            ta.value = text;
                            document.body.appendChild(ta);
                            ta.select();
                            document.execCommand('copy');
                            document.body.removeChild(ta);
                        }
                        copyBtn.textContent = '已复制';
                        setTimeout(() => (copyBtn.textContent = '复制链接'), 1500);
                    } catch (_) {
                        copyBtn.textContent = '复制失败';
                        setTimeout(() => (copyBtn.textContent = '复制链接'), 1500);
                    }
                });
            }
        });
    </script>
</body>
</html>