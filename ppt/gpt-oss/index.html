<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPT-OSS的真正意义</title>
    <meta name="description" content="GPT-OSS 与 Harmony 格式的核心意义：从 ChatML 到多通道架构的技术演进、对开发者与训练者的启发。">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="color-scheme" content="dark light">
    <link rel="preload" href="harmony.png" as="image" fetchpriority="high">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            overflow: hidden;
            position: relative;
        }

        /* 粒子背景 - 更轻柔的效果 */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #00ffff;
            border-radius: 50%;
            opacity: 0;
            box-shadow: 0 0 6px rgba(0, 255, 255, 0.8);
            animation: particleFloat 12s infinite linear;
        }

        .particle.large {
            width: 3px;
            height: 3px;
            box-shadow: 0 0 8px rgba(0, 255, 255, 0.6);
        }

        .particle.small {
            width: 1px;
            height: 1px;
            box-shadow: 0 0 4px rgba(0, 255, 255, 0.9);
        }

        @keyframes particleFloat {
            0% {
                transform: translateY(100vh) translateX(0) scale(0);
                opacity: 0;
            }
            5% {
                opacity: 0.6;
                transform: translateY(95vh) translateX(10px) scale(1);
            }
            50% {
                opacity: 0.8;
                transform: translateY(50vh) translateX(var(--random-x, 30px)) scale(1.2);
            }
            95% {
                opacity: 0.4;
                transform: translateY(5vh) translateX(calc(var(--random-x, 30px) * 2)) scale(0.8);
            }
            100% {
                transform: translateY(-10vh) translateX(calc(var(--random-x, 30px) * 2.5)) scale(0);
                opacity: 0;
            }
        }

        /* 轻柔的网格背景 */
        .grid-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 255, 255, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 255, 0.05) 1px, transparent 1px);
            background-size: 60px 60px;
            z-index: 0;
            animation: gridMove 30s linear infinite;
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(60px, 60px); }
        }

        /* 主容器 */
        .container {
            position: relative;
            z-index: 10;
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* 页面样式 */
        .page {
            display: none;
            width: 90%;
            max-width: 1200px;
            text-align: center;
            padding: 50px;
            animation: slideIn 0.6s ease-out;
        }

        .page.active {
            display: block;
        }



        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* 标题样式 - 占据80%宽度，更强对比度 */
        .main-title {
            width: 80%;
            margin: -80px auto 0 auto;
            font-size: clamp(3rem, 8vw, 7rem);
            font-weight: 900;
            line-height: 1.1;
            text-shadow: 0 0 40px rgba(0, 255, 255, 0.6);
            filter: contrast(1.2);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .main-title .secondary {
            color: #ffffff;
            font-size: clamp(2rem, 5vw, 4.5rem);
            display: block;
            margin: 20px 0;
            font-weight: 300;
            opacity: 0.95;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.4);
            white-space: nowrap;
        }

        .main-title .highlight {
            color: #ffffff;
            font-size: clamp(4rem, 10vw, 9rem);
            display: block;
            margin: 30px 0;
            font-weight: 900;
            text-shadow: 
                0 0 10px rgba(0, 255, 255, 0.8),
                0 0 20px rgba(0, 255, 255, 0.6);
            filter: contrast(1.3);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.9; }
        }

        /* 副标题 */
        .subtitle {
            font-size: clamp(1.2rem, 2.5vw, 2rem);
            color: #888888;
            margin-top: 40px;
            font-weight: 300;
        }

        /* 统一的页面标题样式 - 占据80%宽度 */
        .page-title {
            width: 80%;
            margin: 0 auto 50px auto;
            font-size: clamp(2.5rem, 6vw, 5rem);
            font-weight: bold;
            color: #00ffff;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.4);
            line-height: 1.2;
        }

        /* 提纲列表样式 */
        .outline-list {
            text-align: left;
            max-width: 900px;
            margin: 0 auto;
        }

        .outline-list li {
            font-size: clamp(1.2rem, 2.5vw, 1.8rem);
            margin: 25px 0;
            padding: 20px 30px;
            background: rgba(0, 255, 255, 0.08);
            border-left: 5px solid #00ffff;
            border-radius: 10px;
            list-style: none;
            transition: all 0.3s ease;
        }

        .outline-list li:hover {
            background: rgba(0, 255, 255, 0.15);
            transform: translateX(10px);
        }

        /* 导航按钮 */
        .navigation {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
            display: flex;
            gap: 15px;
        }

        .nav-btn {
            padding: 12px 24px;
            background: rgba(0, 255, 255, 0.15);
            border: 2px solid #00ffff;
            color: #ffffff;
            cursor: pointer;
            border-radius: 25px;
            font-size: 1rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .nav-btn:hover {
            background: rgba(0, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.2);
        }

        .nav-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        /* 页码指示器 */
        .page-indicator {
            position: fixed;
            top: 30px;
            right: 30px;
            z-index: 100;
            font-size: 1.2rem;
            color: #00ffff;
            background: rgba(0, 0, 0, 0.6);
            padding: 10px 20px;
            border-radius: 20px;
            border: 1px solid rgba(0, 255, 255, 0.3);
            backdrop-filter: blur(10px);
        }

        /* 模块内容容器 */
        .module-content {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* 嵌入模块的特殊样式 */
        .module-content.embedded {
            align-items: stretch;
            justify-content: stretch;
            padding: 0;
        }

        .module-content.embedded > div {
            width: 100%;
            height: 100%;
        }



        /* 响应式设计 */
        @media (max-width: 768px) {
            .page {
                padding: 30px 20px;
            }
            
            .outline-list li {
                padding: 15px 20px;
                margin: 15px 0;
            }
            
            .navigation {
                bottom: 20px;
            }
            
            .nav-btn {
                padding: 10px 20px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .main-title {
                width: 95%;
            }
            
            .page-title {
                width: 95%;
            }
        }

        /* 减少动态偏好支持 */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation: none !important;
                transition: none !important;
                scroll-behavior: auto !important;
            }
        }

        /* Harmony 演示样式 */
        .demo-trigger {
            text-align: center;
            margin: 50px 0;
        }

        .demo-btn {
            padding: 20px 40px;
            font-size: 1.3rem;
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.2), rgba(0, 255, 255, 0.1));
            border: 2px solid #00ffff;
            color: #ffffff;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .demo-btn:hover {
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.4), rgba(0, 255, 255, 0.2));
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 255, 255, 0.3);
        }

        .demo-hint {
            color: #888888;
            font-size: 1.1rem;
            margin-top: 15px;
        }

        .demo-container {
            width: 100%;
            height: 80vh;
            display: flex;
            flex-direction: column;
            gap: 20px;
            animation: slideIn 0.6s ease-out;
        }

        .code-demo {
            flex: 2;
            background: rgba(15, 15, 15, 0.9);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 10px;
            overflow: hidden;
        }

        .demo-header {
            background: rgba(0, 255, 255, 0.1);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(0, 255, 255, 0.3);
        }

        .demo-header h3 {
            color: #00ffff;
            margin: 0;
            font-size: 1.2rem;
        }

        .close-demo {
            background: rgba(255, 100, 100, 0.2);
            border: 1px solid #ff6464;
            color: #ff6464;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .close-demo:hover {
            background: rgba(255, 100, 100, 0.4);
        }

        .code-content {
            padding: 20px;
            overflow-y: auto;
            max-height: 400px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            color: #e0e0e0;
            text-align: left;
            white-space: pre-line;
        }

        .explanation-panel {
            flex: 1;
            background: rgba(10, 10, 10, 0.9);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 10px;
            padding: 20px;
            overflow-y: auto;
        }

        .explanation-content {
            color: #cccccc;
            line-height: 1.6;
            font-size: 1.2rem;
        }

        .explanation-content h5 {
            font-size: 1.4rem;
        }

        .explanation-content p {
            font-size: 1.2rem;
        }

        /* Harmony 语法高亮样式 */
        .token-start { color: #ff6b6b; cursor: pointer; font-weight: bold; }
        .token-end { color: #ff6b6b; cursor: pointer; font-weight: bold; }
        .token-role { color: #4ecdc4; cursor: pointer; font-weight: bold; }
        .token-channel { color: #45b7d1; cursor: pointer; font-weight: bold; }
        .token-to { color: #96ceb4; cursor: pointer; font-weight: bold; }
        .token-constrain { color: #feca57; cursor: pointer; font-weight: bold; }
        .token-call { color: #ff9ff3; cursor: pointer; font-weight: bold; }
        .token-return { color: #54a0ff; cursor: pointer; font-weight: bold; }
        .function-name { color: #ffa726; cursor: pointer; }
        .json-content { color: #a8e6cf; }
        .message-content { color: #e0e0e0; }

        .clickable:hover {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            padding: 2px 4px;
        }

        .selected {
            background: rgba(0, 255, 255, 0.2) !important;
            border-radius: 3px;
            padding: 2px 4px;
        }

        /* 自定义滚动条样式 */
        .code-content::-webkit-scrollbar {
            width: 6px;
        }

        .code-content::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 3px;
        }

        .code-content::-webkit-scrollbar-thumb {
            background: rgba(0, 255, 255, 0.3);
            border-radius: 3px;
            transition: background 0.3s ease;
        }

        .code-content::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 255, 255, 0.5);
        }

        .explanation-panel::-webkit-scrollbar {
            width: 6px;
        }

        .explanation-panel::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 3px;
        }

        .explanation-panel::-webkit-scrollbar-thumb {
            background: rgba(0, 255, 255, 0.3);
            border-radius: 3px;
            transition: background 0.3s ease;
        }

        .explanation-panel::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 255, 255, 0.5);
        }

        /* 技术栈对比样式 */
        .tech-stack-comparison {
            width: 100%;
            max-width: 1100px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .stack-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 40px;
            margin-bottom: 40px;
        }

        .tech-stack {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .stack-title {
            font-size: 1.5rem;
            color: #cccccc;
            text-align: center;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .left-stack .stack-title {
            color: #ff9999;
        }

        .right-stack .stack-title {
            color: #99ff99;
        }

        .stack-layer {
            background: rgba(20, 20, 20, 0.8);
            border: 2px solid rgba(100, 100, 100, 0.3);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stack-layer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent, rgba(255, 255, 255, 0.05));
            pointer-events: none;
        }

        .stack-layer:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 255, 255, 0.1);
        }

        /* 左侧技术栈颜色 */
        .left-stack .stack-layer {
            border-color: rgba(255, 153, 153, 0.4);
            background: rgba(40, 20, 20, 0.6);
        }

        .left-stack .stack-layer:hover {
            border-color: rgba(255, 153, 153, 0.7);
            box-shadow: 0 8px 25px rgba(255, 153, 153, 0.2);
        }

        /* 右侧技术栈颜色 */
        .right-stack .stack-layer {
            border-color: rgba(153, 255, 153, 0.4);
            background: rgba(20, 40, 20, 0.6);
        }

        .right-stack .stack-layer:hover {
            border-color: rgba(153, 255, 153, 0.7);
            box-shadow: 0 8px 25px rgba(153, 255, 153, 0.2);
        }

        /* 高亮层（格式层） */
        .highlight-layer {
            border-width: 3px !important;
            transform: scale(1.02);
        }

        .left-stack .highlight-layer {
            border-color: rgba(255, 153, 153, 0.8) !important;
            background: rgba(60, 30, 30, 0.8) !important;
            box-shadow: 0 0 20px rgba(255, 153, 153, 0.3);
        }

        .right-stack .highlight-layer {
            border-color: rgba(153, 255, 153, 0.8) !important;
            background: rgba(30, 60, 30, 0.8) !important;
            box-shadow: 0 0 20px rgba(153, 255, 153, 0.3);
        }

        .layer-content {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 8px;
            color: #ffffff;
        }

        .layer-description {
            font-size: 1rem;
            color: #aaaaaa;
            font-weight: 300;
        }

        /* 演进箭头 */
        .evolution-arrow {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            width: 120px;
        }

        .arrow-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .arrow-symbol {
            font-size: 3rem;
            color: #00ffff;
            font-weight: bold;
            text-shadow: 0 0 15px rgba(0, 255, 255, 0.6);
            animation: arrowPulse 2s ease-in-out infinite;
        }

        .arrow-text {
            font-size: 1rem;
            color: #00ffff;
            font-weight: 500;
        }

        @keyframes arrowPulse {
            0%, 100% { 
                opacity: 0.8; 
                transform: scale(1);
            }
            50% { 
                opacity: 1; 
                transform: scale(1.1);
            }
        }

        /* 核心洞察 */
        .core-insight {
            text-align: center;
            margin-top: 40px;
        }

        .core-insight p {
            margin: 0;
            font-size: 1.5rem;
            font-weight: bold;
            line-height: 1.4;
        }

        .insight-normal {
            color: #ffffff;
        }

        .insight-highlight {
            color: #ff4444;
            font-size: 1.7rem;
            text-shadow: 0 0 15px rgba(255, 68, 68, 0.4);
        }

        .highlight-text {
            color: #00ffff;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.4);
        }

        /* 响应式设计 */
        @media (max-width: 900px) {
            .stack-container {
                flex-direction: column;
                gap: 30px;
            }

            .evolution-arrow {
                width: auto;
                transform: rotate(90deg);
            }

            .arrow-symbol {
                font-size: 2.5rem;
            }

            .tech-stack {
                width: 100%;
                max-width: 500px;
            }
        }

        @media (max-width: 600px) {
            .tech-stack-comparison {
                padding: 20px 10px;
            }

            .stack-layer {
                padding: 15px;
            }

            .layer-content {
                font-size: 1.1rem;
            }

            .layer-description {
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <!-- 轻柔的粒子背景 -->
    <div class="particles" id="particles"></div>
    
    <!-- 轻柔的网格背景 -->
    <div class="grid-background"></div>

    <!-- 页码指示器 -->
    <div class="page-indicator" role="status" aria-live="polite" aria-atomic="true">
        <span id="currentPage">1</span> / <span id="totalPages">11</span>
    </div>

    <!-- 主容器 -->
    <div class="container">
        <!-- 第1页：标题页 -->
        <div class="page active" id="page1">
            <div class="main-title">
                <div class="secondary"><span style="color: #ff4444; font-size: 1.2em; font-weight: bold;">绝大多数</span> 的视频都没能讲出</div>
                <div class="highlight">GPT-OSS</div>
                <div class="secondary">的真正意义</div>
            </div>
            <div class="harmony-image">
                <img src="harmony.png" alt="Harmony Format"
                     style="width: clamp(400px, 50vw, 600px); height: auto; margin-top: 40px; filter: drop-shadow(0 0 25px rgba(0, 255, 255, 0.4)); max-width: 90%;"
                     decoding="async" fetchpriority="high" loading="eager" draggable="false">
            </div>
        </div>

        <!-- 第2页：提纲 -->
        <div class="page" id="page2">
            <h1 class="page-title">提纲</h1>
            <ul class="outline-list">
                <li>为什么 gpt-oss 系列模型被低估了</li>
                <li>Harmony 格式 VS ChatML</li>
                <li>对 AI 开发者的意义</li>
                <li>对模型训练·微调的思考</li>

            </ul>
        </div>

        <!-- 第3页：gpt-oss 系列被低估了 -->
        <div class="page" id="page3">
            <h1 class="page-title">gpt-oss 系列被低估了</h1>
            
            <!-- 技术栈对比图 -->
            <div class="tech-stack-comparison">
                <div class="stack-container">
                    <!-- 左侧 - 过去的技术栈 (ChatML) -->
                    <div class="tech-stack left-stack">
                        <h3 class="stack-title">过去的 AI 技术栈</h3>
                        <div class="stack-layer layer-4">
                            <div class="layer-content">Chat Bot</div>
                            <div class="layer-description">简单对话机器人</div>
                        </div>
                        <div class="stack-layer layer-3">
                            <div class="layer-content">Completion API</div>
                            <div class="layer-description">基础文本生成</div>
                        </div>
                        <div class="stack-layer layer-2 highlight-layer">
                            <div class="layer-content">ChatML 格式</div>
                            <div class="layer-description">简单消息格式</div>
                        </div>
                        <div class="stack-layer layer-1">
                            <div class="layer-content">指令模型</div>
                            <div class="layer-description">Follow Instructions</div>
                        </div>
                    </div>

                    <!-- 中间箭头 -->
                    <div class="evolution-arrow">
                        <div class="arrow-content">
                            <span class="arrow-symbol">→</span>
                            <span class="arrow-text">技术演进</span>
                        </div>
                    </div>

                    <!-- 右侧 - 现在的技术栈 (Harmony) -->
                    <div class="tech-stack right-stack">
                        <h3 class="stack-title">现在的 AI 技术栈</h3>
                        <div class="stack-layer layer-4">
                            <div class="layer-content">AI Agent</div>
                            <div class="layer-description">智能决策与执行</div>
                        </div>
                        <div class="stack-layer layer-3">
                            <div class="layer-content">Response API</div>
                            <div class="layer-description">结构化响应接口</div>
                        </div>
                        <div class="stack-layer layer-2 highlight-layer">
                            <div class="layer-content">Harmony 格式</div>
                            <div class="layer-description">多通道架构</div>
                        </div>
                        <div class="stack-layer layer-1">
                            <div class="layer-content">思维模型 (GPT-OSS)</div>
                            <div class="layer-description">Reasoning & Planning</div>
                        </div>
                    </div>
                </div>

                <!-- 底部说明 -->
                <div class="core-insight">
                    <p><span class="insight-normal">GPT-OSS 是 Agent 时代的</span><span class="insight-highlight">第一个开源技术栈</span></p>
                </div>
            </div>
        </div>

        <!-- 第4页：Harmony 动态演示 -->
        <div class="page" id="page4">
            <h1 class="page-title">Harmony 格式</h1>
            
            <!-- 演示触发按钮 -->
            <div class="demo-trigger">
                <button class="demo-btn" onclick="startHarmonyDemo()">
                     Harmony 演示
                </button>
                <p class="demo-hint">体验新一代对话格式的多通道架构</p>
            </div>
            
            <!-- 演示内容区域 -->
            <div class="demo-container" id="harmonyDemoContainer" hidden>
                <!-- 代码演示区 -->
                <div class="code-demo">
                    <div class="demo-header">
                        <h3>天气查询 + 智能提醒场景</h3>
                        <button class="close-demo" onclick="closeHarmonyDemo()">×</button>
                    </div>
                    <div class="code-content" id="harmonyCodeContent">
                        <!-- Harmony 代码将在这里动态生成 -->
                    </div>
                </div>
                
                <!-- 解释区域 -->
                <div class="explanation-panel" id="explanationPanel">
                    <div class="explanation-content" id="explanationContent">
                        <p>👆 选择代码中的任意彩色标记来了解 Harmony 格式的不同组件</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 第5页：Harmony vs ChatML -->
        <div class="page" id="page5">
            <h1 class="page-title">Harmony vs ChatML</h1>
            <div class="subtitle">格式对比与优势分析</div>
        </div>

        <!-- 第6页：对AI开发者的意义 -->
        <div class="page" id="page6">
            <h1 class="page-title">对 AI 开发者的意义</h1>
             <div class="tech-stack-comparison">
                <div class="stack-container">
                    <!-- 左侧 - 现状 -->
                    <div class="tech-stack left-stack">
                        <h3 class="stack-title">现状：屎上雕花</h3>
                        <div class="stack-layer layer-3">
                            <div class="layer-content">Fake Agent</div>
                            <div class="layer-description">基于无状态服务的伪Agent</div>
                        </div>
                        <div class="stack-layer layer-2 highlight-layer">
                            <div class="layer-content">Completion API</div>
                            <div class="layer-description">无状态文本补全接口</div>
                        </div>
                        <div class="stack-layer layer-1">
                            <div class="layer-content">指令模型</div>
                            <div class="layer-description">单次响应，无深度思考</div>
                        </div>
                    </div>

                    <!-- 中间箭头 -->
                    <div class="evolution-arrow">
                        <div class="arrow-content">
                            <span class="arrow-symbol">→</span>
                            <span class="arrow-text">真正演进</span>
                        </div>
                    </div>

                    <!-- 右侧 - 应该采用的架构 -->
                    <div class="tech-stack right-stack">
                        <h3 class="stack-title">未来：真正智能</h3>
                        <div class="stack-layer layer-3">
                            <div class="layer-content">Real Agent</div>
                            <div class="layer-description">基于有状态服务的真Agent</div>
                        </div>
                        <div class="stack-layer layer-2 highlight-layer">
                            <div class="layer-content">Advanced API + Stateful</div>
                            <div class="layer-description">结构化响应 + 有状态服务</div>
                        </div>
                        <div class="stack-layer layer-1">
                            <div class="layer-content">思维模型 (GPT-OSS)</div>
                            <div class="layer-description">多轮思考 + 工具调用优化</div>
                        </div>
                    </div>
                </div>

                <!-- 底部说明 -->
                <div class="core-insight">
                    <p><span class="insight-normal">不仅是 API 设计的改进，更是</span><span class="insight-highlight">架构范式</span><span class="insight-normal">的转变</span></p>
                    <p style="margin-top: 20px; font-size: 1.3rem;">状态(stateful context) : 对话记录 、工具、 记忆 、 MCP... </p>
                </div>
            </div>
        </div>

        <!-- 第7页：我们的思考 -->
        <div class="page" id="page7">
            <h1 class="page-title">我们的思考</h1>
            <div style="text-align: center; padding: 50px; font-size: 2.5rem; line-height: 1.6;">
                <p style="margin-bottom: 40px;">
                    <span style="display: block; color: #ffffff;">不是要完全投入 OpenAI 的技术栈</span>
                </p>
                <p style="margin-bottom: 40px;">
                    <span style="display: block; color: #00ffff;">而是要思考和设计</span>
                    <span style="display: block; color: #ff4444; font-size: 3rem; margin-top: 20px;">适合 Agent 时代的 API 和底层模型</span>
                </p>
                <p>
                    <span style="display: block; color: #ffffff; font-size: 2rem;">gpt-oss 是值得我们去参考和研究的模型</span>
                </p>
            </div>
        </div>

        <!-- 第8页：对训练者的意义 - 结构熵对比 -->
        <div class="page" id="page8">
            <h1 class="page-title">对训练者的意义</h1>
            <div class="subtitle">（个人的洞察，有误请指出）</div>
            
            <div style="max-width: 1200px; margin: 0 auto; padding: 20px; font-size: 1.3rem; line-height: 1.6; text-align: left;">
                <!-- 结构熵指标对比 -->
                <div style="margin-bottom: 40px;">
                    <h2 style="color: #00ffff; text-align: center; margin-bottom: 30px; font-size: 1.8rem;">结构熵观察</h2>
                    
                    <div style="display: flex; gap: 20px; margin-bottom: 20px; flex-wrap: wrap;">
                        <div style="flex: 1; min-width: 300px; background: rgba(255, 153, 153, 0.1); border-left: 4px solid #ff9999; padding: 20px; border-radius: 0 8px 8px 0;">
                            <h3 style="color: #ff9999; margin-top: 0; text-align: center;">ChatML - 低结构熵</h3>
                            
                            <div style="margin-bottom: 15px;">
                                <h4 style="color: #ffcccc; margin-bottom: 8px;">状态空间大小</h4>
                                <p style="margin: 0; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 5px;">
                                    <strong>有限的基本组合</strong><br>
                                    状态数量级较小
                                </p>
                            </div>
                            
                            <div style="margin-bottom: 15px;">
                                <h4 style="color: #ffcccc; margin-bottom: 8px;">转换规则复杂度</h4>
                                <p style="margin: 0; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 5px;">
                                    <strong>严格配对模式</strong><br>
                                    &lt;|im_start|&gt; → 角色 → 内容 → &lt;|im_end|&gt;
                                </p>
                            </div>
                            
                            <div>
                                <h4 style="color: #ffcccc; margin-bottom: 8px;">语法自由度</h4>
                                <p style="margin: 0; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 5px;">
                                    <strong>线性单维架构</strong><br>
                                    所有信息压缩到单一文本流
                                </p>
                            </div>
                        </div>
                        
                        <div style="flex: 1; min-width: 300px; background: rgba(153, 255, 153, 0.1); border-left: 4px solid #99ff99; padding: 20px; border-radius: 0 8px 8px 0;">
                            <h3 style="color: #99ff99; margin-top: 0; text-align: center;">Harmony - 高结构熵</h3>
                            
                            <div style="margin-bottom: 15px;">
                                <h4 style="color: #ccffcc; margin-bottom: 8px;">状态空间大小</h4>
                                <p style="margin: 0; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 5px;">
                                    <strong>数百种基本组合</strong><br>
                                    角色×通道×路由×约束，可动态扩展
                                </p>
                            </div>
                            
                            <div style="margin-bottom: 15px;">
                                <h4 style="color: #ccffcc; margin-bottom: 8px;">转换规则复杂度</h4>
                                <p style="margin: 0; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 5px;">
                                    <strong>状态机式转换</strong><br>
                                    支持多通道切换和跨角色路由
                                </p>
                            </div>
                            
                            <div>
                                <h4 style="color: #ccffcc; margin-bottom: 8px;">语法自由度</h4>
                                <p style="margin: 0; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 5px;">
                                    <strong>多维并行架构</strong><br>
                                    思维、交互、输出物理隔离
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 权衡总结 -->
                    <div style="text-align: center; margin: 30px 0; padding: 20px; background: rgba(0, 255, 255, 0.05); border-radius: 10px; border: 1px solid rgba(0, 255, 255, 0.2);">
                        <p style="margin: 0; font-size: 1.4rem; font-weight: bold;">
                            <span style="color: #ff9999;">简单稳定</span> vs <span style="color: #99ff99;">复杂灵活</span>
                            <br><span style="color: #cccccc; font-size: 1.1rem; font-weight: normal; margin-top: 10px; display: block;">
                                低结构熵易学习但扩展受限，高结构熵难训练但潜力更大
                            </span>
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 第9页：训练和微调的关键假设 -->
        <div class="page" id="page9">
            <h1 class="page-title">训练和微调的关键假设</h1>
            <div class="subtitle">需要通过实验验证的观点</div>
            
            <div style="max-width: 1100px; margin: 0 auto; padding: 15px; font-size: 1.2rem; line-height: 1.5; text-align: left;">
                <!-- 训练和微调的思考 -->
                <div style="background: rgba(0, 255, 255, 0.1); border-left: 4px solid #00ffff; padding: 20px; border-radius: 0 10px 10px 0;">
                    <p style="margin-bottom: 25px; text-align: center; color: #aaaaaa; font-size: 1.1rem;">
                        <strong>以下观点基于结构熵分析，需要通过实验验证：</strong>
                    </p>
                    
                    <div style="display: grid; gap: 20px; margin-bottom: 25px;">
                        <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 8px; border-left: 4px solid #ff6b6b;">
                            <h4 style="color: #ff6b6b; margin-top: 0; font-size: 1.3rem;">训练复杂度假设</h4>
                            <p style="margin: 0; font-size: 1.1rem; line-height: 1.4;">Harmony格式训练成本更高，但收敛后表现更稳定且上限更高<br>
                            <span style="color: #888; font-size: 0.95rem; margin-top: 8px; display: block;">→ 可用 gpt-oss 模型验证训练稳定性和收敛特性</span></p>
                        </div>
                        
                        <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 8px; border-left: 4px solid #4ecdc4;">
                            <h4 style="color: #4ecdc4; margin-top: 0; font-size: 1.3rem;">微调鲁棒性假设</h4>
                            <p style="margin: 0; font-size: 1.1rem; line-height: 1.4;">Harmony通过新增通道扩展功能更容易，且不易破坏原有能力<br>
                            <span style="color: #888; font-size: 0.95rem; margin-top: 8px; display: block;">→ 可用 gpt-oss 进行功能扩展微调实验，对比扩展前后性能</span></p>
                        </div>
                        
                        <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 8px; border-left: 4px solid #45b7d1;">
                            <h4 style="color: #45b7d1; margin-top: 0; font-size: 1.3rem;">知识迁移假设</h4>
                            <p style="margin: 0; font-size: 1.1rem; line-height: 1.4;">用Harmony格式的gpt-oss数据训练小模型（如Qwen3 base），可能获得意外的结构化推理能力<br>
                            <span style="color: #888; font-size: 0.95rem; margin-top: 8px; display: block;">→ 值得尝试的低成本实验，验证格式对推理能力的影响</span></p>
                        </div>
                        
                        <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 8px; border-left: 4px solid #96ceb4;">
                            <h4 style="color: #96ceb4; margin-top: 0; font-size: 1.3rem;">格式泛化假设</h4>
                            <p style="margin: 0; font-size: 1.1rem; line-height: 1.4;">高结构熵训练的模型，对格式变化的适应性更强，更易适配不同下游任务<br>
                            <span style="color: #888; font-size: 0.95rem; margin-top: 8px; display: block;">→ 可通过格式变换实验验证泛化能力</span></p>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px; padding: 18px; background: rgba(255, 255, 255, 0.05); border-radius: 8px;">
                        <p style="margin: 0; font-size: 1.2rem; color: #ffffff;">
                            <strong>核心观点：</strong><span style="color: #00ffff;">用更高的初期复杂度，换取更好的长期扩展性</span>
                        </p>
                        <p style="margin: 12px 0 0 0; font-size: 1rem; color: #cccccc;">
                            这种权衡在 Agent 时代可能是值得的
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 第10页：微调样例：支持MCP资源读取 -->
        <div class="page" id="page10">
            <h1 class="page-title">微调样例：<br>扩展内置工具</h1>
            <div class="subtitle">让模型具备内置工具能力</div>
            
            <div style="max-width: 1100px; margin: 0 auto; padding: 15px; font-size: 1.2rem; line-height: 1.6; text-align: left;">
                <!-- 微调样例说明 -->
                <div style="background: rgba(106, 90, 205, 0.15); border-left: 4px solid #6a5acd; padding: 25px; border-radius: 0 10px 10px 0; margin-bottom: 30px;">
                    <h3 style="color: #6a5acd; margin-top: 0; font-size: 1.5rem; text-align: center;">通过微调扩展内置工具能力</h3>
                    
                    <div style="margin: 20px 0;">
                        <p style="font-size: 1.2rem; line-height: 1.6;">
                            在MCP协议中，资源通过URL进行标识和访问。我们可以对gpt-oss模型进行微调，使其具备内置的<code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 4px;">read_mcp_resource(url: str) -> any</code>工具能力。
                            <br>(需要推理框架也支持扩展自定义工具，这是个未来的方向)
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 第11页：观点总结 -->
        <div class="page" id="page11">
            <h1 class="page-title">观点总结</h1>
            
            <div style="max-width: 1100px; margin: 0 auto; padding: 40px 20px; font-size: 1.3rem; line-height: 1.6; text-align: left;">
                <!-- 三个核心观点 -->
                <div style="display: flex; flex-direction: column; gap: 35px;">
                    
                    <!-- 观点1 -->
                    <div style="background: rgba(255, 153, 153, 0.1); border-left: 5px solid #ff9999; padding: 25px 30px; border-radius: 0 12px 12px 0;">
                        <h3 style="color: #ff9999; margin-top: 0; margin-bottom: 15px; font-size: 1.4rem;">1. 测评时机很重要</h3>
                        <p style="margin: 0; color: #ffffff; font-size: 1.2rem; line-height: 1.5;">
                            在各大框架没有完美支持 gpt-oss 前不要测评，也不要有结论
                        </p>
                        <p style="margin: 15px 0 0 0; color: #cccccc; font-size: 1rem;">
                            新格式需要生态完善，过早评判可能错失机会
                        </p>
                    </div>
                    
                    <!-- 观点2 -->
                    <div style="background: rgba(153, 255, 153, 0.1); border-left: 5px solid #99ff99; padding: 25px 30px; border-radius: 0 12px 12px 0;">
                        <h3 style="color: #99ff99; margin-top: 0; margin-bottom: 15px; font-size: 1.4rem;">2. Agent 时代的开源技术栈</h3>
                        <p style="margin: 0; color: #ffffff; font-size: 1.2rem; line-height: 1.5;">
                            GPT OSS + Harmony 是一个 Agent 时代的开源技术栈，更适合做方向探索，学习用
                        </p>
                        <p style="margin: 15px 0 0 0; color: #cccccc; font-size: 1rem;">
                            不是为了直接部署，而是为了理解未来架构
                        </p>
                    </div>
                    
                    <!-- 观点3 -->
                    <div style="background: rgba(153, 153, 255, 0.1); border-left: 5px solid #9999ff; padding: 25px 30px; border-radius: 0 12px 12px 0;">
                        <h3 style="color: #9999ff; margin-top: 0; margin-bottom: 15px; font-size: 1.4rem;">3. 抛砖引玉，促进交流</h3>
                        <p style="margin: 0; color: #ffffff; font-size: 1.2rem; line-height: 1.5;">
                            希望应用开发和模型设计方有更多交流，思考 Agent 时代的底层变革
                        </p>
                        <p style="margin: 15px 0 0 0; color: #cccccc; font-size: 1rem;">
                            技术演进需要产业链上下游的共同探索
                        </p>
                    </div>
                </div>
                
                <!-- 底部强调 -->
                <div style="text-align: center; margin-top: 50px; padding: 30px; background: rgba(0, 255, 255, 0.08); border-radius: 15px; border: 2px solid rgba(0, 255, 255, 0.2);">
                    <p style="margin: 0; font-size: 1.6rem; font-weight: bold; color: #00ffff;">
                        关键在于理解 <span style="color: #ff4444;">格式即架构</span> 的深层含义
                    </p>
                    <p style="margin: 20px 0 0 0; font-size: 1.2rem; color: #ffffff; font-weight: normal;">
                        Harmony 不只是一种数据格式，更是一种思维方式
                    </p>
                </div>
            </div>
        </div>
    </div>



    <!-- 导航按钮 -->
    <div class="navigation" role="navigation" aria-label="演示分页导航">
        <button class="nav-btn" type="button" id="prevBtn" onclick="previousPage()" aria-label="上一页">← 上一页</button>
        <button class="nav-btn" type="button" id="nextBtn" onclick="nextPage()" aria-label="下一页">下一页 →</button>
    </div>

    <script>
        let currentPageIndex = 1;
        const totalPages = 11;
        const prefersReducedMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        const isMobile = window.matchMedia && window.matchMedia('(max-width: 768px)').matches;

        // 创建轻柔的粒子效果
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            // 根据设备与用户偏好动态设置粒子数量
            const particleCount = prefersReducedMotion ? 0 : (isMobile ? 25 : 50);

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                
                // 随机选择粒子大小
                const sizeRandom = Math.random();
                if (sizeRandom < 0.3) {
                    particle.className = 'particle small';
                } else if (sizeRandom < 0.7) {
                    particle.className = 'particle';
                } else {
                    particle.className = 'particle large';
                }
                
                // 随机水平位置
                const leftPos = Math.random() * 100;
                particle.style.left = leftPos + '%';
                
                // 设置随机的水平偏移CSS变量
                const randomX = (Math.random() - 0.5) * 200; // -100px 到 100px
                particle.style.setProperty('--random-x', randomX + 'px');
                
                // 随机动画延迟
                particle.style.animationDelay = Math.random() * 12 + 's';
                
                // 稍微变化的动画持续时间
                particle.style.animationDuration = (Math.random() * 4 + 10) + 's';
                
                particlesContainer.appendChild(particle);
            }
        }

        // 页面切换函数
        function showPage(pageIndex) {
            // 隐藏所有页面
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.classList.remove('active'));



            // 显示目标页面
            const targetPage = document.getElementById(`page${pageIndex}`);
            if (targetPage) {
                targetPage.classList.add('active');
                currentPageIndex = pageIndex;
                updateNavigation();
                updatePageIndicator();
                // 同步地址栏 hash，便于分享与直接跳转
                if (location.hash !== '#' + pageIndex) {
                    history.replaceState(null, '', '#' + pageIndex);
                }
                // 更新标题以包含页码信息（不改变原始标题语义）
                try {
                    const baseTitle = 'GPT-OSS的真正意义';
                    document.title = `${baseTitle}（${currentPageIndex}/${totalPages}）`;
                } catch (e) { /* no-op */ }

                // 第3页不需要特殊加载逻辑
            }
        }



        // Harmony 演示相关函数
        function startHarmonyDemo() {
            document.querySelector('.demo-trigger').style.display = 'none';
            const container = document.getElementById('harmonyDemoContainer');
            container.hidden = false;
            container.style.display = 'flex';
            generateHarmonyCode();
        }

        function closeHarmonyDemo() {
            document.querySelector('.demo-trigger').style.display = 'block';
            const container = document.getElementById('harmonyDemoContainer');
            container.style.display = '';
            container.hidden = true;
        }

        function generateHarmonyCode() {
            const harmonyExample = `<span class="token-start clickable" data-explanation="start">&lt;|start|&gt;</span><span class="token-role clickable" data-explanation="user">user</span><span class="token-start clickable" data-explanation="message">&lt;|message|&gt;</span>明天北京天气怎么样？如果下雨请提醒我带伞。<span class="token-end clickable" data-explanation="end">&lt;|end|&gt;</span>

<span class="token-start clickable" data-explanation="start">&lt;|start|&gt;</span><span class="token-role clickable" data-explanation="assistant">assistant</span><span class="token-channel clickable" data-explanation="analysis">&lt;|channel|&gt;</span><span class="token-channel clickable" data-explanation="analysis">analysis</span><span class="token-start clickable" data-explanation="message">&lt;|message|&gt;</span>
用户询问明天北京的天气情况，并且需要根据天气情况决定是否设置带伞提醒。
这是一个典型的条件判断场景：
1. 先查询天气
2. 根据降雨情况决定是否设置提醒
<span class="token-end clickable" data-explanation="end">&lt;|end|&gt;</span>

<span class="token-start clickable" data-explanation="start">&lt;|start|&gt;</span><span class="token-role clickable" data-explanation="assistant">assistant</span><span class="token-channel clickable" data-explanation="commentary">&lt;|channel|&gt;</span><span class="token-channel clickable" data-explanation="commentary">commentary</span><span class="token-start clickable" data-explanation="message">&lt;|message|&gt;</span>我来帮您查询明天北京的天气情况。<span class="token-end clickable" data-explanation="end">&lt;|end|&gt;</span>

<span class="token-start clickable" data-explanation="start">&lt;|start|&gt;</span><span class="token-role clickable" data-explanation="assistant">assistant</span><span class="token-channel clickable" data-explanation="commentary">&lt;|channel|&gt;</span><span class="token-channel clickable" data-explanation="commentary">commentary</span> <span class="token-to clickable" data-explanation="to">to=</span><span class="function-name clickable" data-explanation="function">functions.get_weather</span><span class="token-constrain clickable" data-explanation="constrain">&lt;|constrain|&gt;</span><span class="token-constrain clickable" data-explanation="json">json</span><span class="token-start clickable" data-explanation="message">&lt;|message|&gt;</span><span class="json-content">{"city": "北京", "date": "明天"}</span><span class="token-call clickable" data-explanation="call">&lt;|call|&gt;</span>

<span class="token-start clickable" data-explanation="start">&lt;|start|&gt;</span><span class="function-name clickable" data-explanation="function_return">functions.get_weather</span> <span class="token-to clickable" data-explanation="to_assistant">to=assistant</span><span class="token-channel clickable" data-explanation="commentary">&lt;|channel|&gt;</span><span class="token-channel clickable" data-explanation="commentary">commentary</span><span class="token-start clickable" data-explanation="message">&lt;|message|&gt;</span><span class="json-content">{"temperature": 15, "condition": "rainy", "precipitation": "80%", "forecast": "明天有小雨"}</span><span class="token-end clickable" data-explanation="end">&lt;|end|&gt;</span>

<span class="token-start clickable" data-explanation="start">&lt;|start|&gt;</span><span class="token-role clickable" data-explanation="assistant">assistant</span><span class="token-channel clickable" data-explanation="analysis">&lt;|channel|&gt;</span><span class="token-channel clickable" data-explanation="analysis">analysis</span><span class="token-start clickable" data-explanation="message">&lt;|message|&gt;</span>
天气查询结果显示明天北京有小雨，降水概率80%。
根据条件判断，需要设置带伞提醒。
<span class="token-end clickable" data-explanation="end">&lt;|end|&gt;</span>

<span class="token-start clickable" data-explanation="start">&lt;|start|&gt;</span><span class="token-role clickable" data-explanation="assistant">assistant</span><span class="token-channel clickable" data-explanation="commentary">&lt;|channel|&gt;</span><span class="token-channel clickable" data-explanation="commentary">commentary</span> <span class="token-to clickable" data-explanation="to">to=</span><span class="function-name clickable" data-explanation="function">functions.set_reminder</span><span class="token-constrain clickable" data-explanation="constrain">&lt;|constrain|&gt;</span><span class="token-constrain clickable" data-explanation="json">json</span><span class="token-start clickable" data-explanation="message">&lt;|message|&gt;</span><span class="json-content">{"time": "明天早上8点", "message": "记得带伞，明天北京有雨", "priority": "medium"}</span><span class="token-call clickable" data-explanation="call">&lt;|call|&gt;</span>

<span class="token-start clickable" data-explanation="start">&lt;|start|&gt;</span><span class="function-name clickable" data-explanation="function_return">functions.set_reminder</span> <span class="token-to clickable" data-explanation="to_assistant">to=assistant</span><span class="token-channel clickable" data-explanation="commentary">&lt;|channel|&gt;</span><span class="token-channel clickable" data-explanation="commentary">commentary</span><span class="token-start clickable" data-explanation="message">&lt;|message|&gt;</span><span class="json-content">{"status": "success", "reminder_id": "R12345"}</span><span class="token-end clickable" data-explanation="end">&lt;|end|&gt;</span>

<span class="token-start clickable" data-explanation="start">&lt;|start|&gt;</span><span class="token-role clickable" data-explanation="assistant">assistant</span><span class="token-channel clickable" data-explanation="final">&lt;|channel|&gt;</span><span class="token-channel clickable" data-explanation="final">final</span><span class="token-start clickable" data-explanation="message">&lt;|message|&gt;</span>根据查询结果，明天北京有小雨，气温15°C，降水概率80%。

我已经为您设置了明天早上8点的提醒："记得带伞，明天北京有雨"。

建议您准备一把雨伞，祝您出行顺利！☔<span class="token-return clickable" data-explanation="return">&lt;|return|&gt;</span>`;

            document.getElementById('harmonyCodeContent').innerHTML = harmonyExample;
            addClickEventListeners();
        }

        function addClickEventListeners() {
            const clickableElements = document.querySelectorAll('.clickable');
            clickableElements.forEach(element => {
                element.addEventListener('click', function() {
                    // 移除之前的选中状态
                    document.querySelectorAll('.selected').forEach(el => el.classList.remove('selected'));
                    
                    // 添加选中状态
                    this.classList.add('selected');
                    
                    // 显示解释
                    const explanation = this.getAttribute('data-explanation');
                    showExplanation(explanation);
                });
            });
        }

        function showExplanation(type) {
            const explanations = {
                'start': {
                    title: '&lt;|start|&gt; - 消息开始标记',
                    content: 'Harmony格式中每个消息块的开始标记。与ChatML的&lt;|im_start|&gt;类似，但更简洁。'
                },
                'end': {
                    title: '&lt;|end|&gt; - 消息结束标记',
                    content: 'Harmony格式中每个消息块的结束标记。与ChatML的&lt;|im_end|&gt;对应。'
                },
                'message': {
                    title: '&lt;|message|&gt; - 消息内容标记',
                    content: '标记实际的消息内容开始。在此标记之后的内容是真正的消息文本。'
                },
                'user': {
                    title: 'user - 用户角色',
                    content: '表示这个消息来自用户。类似ChatML中的user角色，但在Harmony中是消息路由的一部分。'
                },
                'assistant': {
                    title: 'assistant - 助手角色',
                    content: '表示这个消息来自AI助手。在Harmony中，assistant可以通过不同通道发送多种类型的消息。'
                },
                'analysis': {
                    title: 'analysis通道 - 思考分析',
                    content: '模型的内部思考和分析过程。这个通道让模型的推理过程变得透明可观测，方便调试和理解。'
                },
                'commentary': {
                    title: 'commentary通道 - 工具交互',
                    content: '用于工具调用和与外部系统交互的通道。模型可以在这个通道中调用函数并接收结果。'
                },
                'final': {
                    title: 'final通道 - 最终回复',
                    content: '给用户的最终回复内容。这是用户会看到的最终答案，与内部思考过程分离。'
                },
                'to': {
                    title: 'to= - 消息路由',
                    content: '指定消息的目标接收者。可以路由到特定的函数或系统组件，实现精确的消息传递。'
                },
                'constrain': {
                    title: '&lt;|constrain|&gt; - 格式约束',
                    content: '约束输出的格式类型。例如"json"表示输出必须是有效的JSON格式，确保数据的结构化。'
                },
                'json': {
                    title: 'json - JSON格式约束',
                    content: '指定输出内容必须符合JSON格式。这确保了工具调用参数的正确性和可解析性。'
                },
                'call': {
                    title: '&lt;|call|&gt; - 函数调用',
                    content: '执行函数调用的标记。在此标记前的JSON内容会作为参数传递给指定的函数。'
                },
                'return': {
                    title: '&lt;|return|&gt; - 返回结果',
                    content: '标记最终返回给用户的内容结束。表示整个处理流程完成，用户将看到final通道的内容。'
                },
                'function': {
                    title: 'functions.xxx - 函数名称',
                    content: '具体的函数名称，如get_weather或set_reminder。这些是可调用的工具函数。'
                },
                'function_return': {
                    title: '函数返回 - 工具执行结果',
                    content: '函数执行后返回的结果。工具完成任务后会将结果发送回assistant进行后续处理。'
                },
                'to_assistant': {
                    title: 'to=assistant - 返回给助手',
                    content: '工具执行结果返回给assistant的路由标记。表示工具已完成任务，结果可供模型使用。'
                }
            };

            const explanation = explanations[type];
            if (explanation) {
                document.getElementById('explanationContent').innerHTML = `
                    <h5 style="color: #00ffff; margin-bottom: 10px;">${explanation.title}</h5>
                    <p>${explanation.content}</p>
                `;
            }
        }



        // 下一页
        function nextPage() {
            if (currentPageIndex < totalPages) {
                showPage(currentPageIndex + 1);
            }
        }

        // 上一页
        function previousPage() {
            if (currentPageIndex > 1) {
                showPage(currentPageIndex - 1);
            }
        }

        // 更新导航按钮状态
        function updateNavigation() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');

            prevBtn.disabled = currentPageIndex === 1;
            nextBtn.disabled = currentPageIndex === totalPages;
        }

        // 更新页码指示器
        function updatePageIndicator() {
            document.getElementById('currentPage').textContent = currentPageIndex;
            document.getElementById('totalPages').textContent = totalPages;
        }

        // 键盘导航
        document.addEventListener('keydown', function(event) {
            if (event.key === 'ArrowLeft') {
                previousPage();
            } else if (event.key === 'ArrowRight') {
                nextPage();
            }
        });

        // 触控滑动导航（移动端）
        (function addTouchNavigation() {
            let touchStartX = null;
            let touchStartY = null;
            const threshold = 50; // 横向滑动阈值
            document.addEventListener('touchstart', function(e) {
                if (!e.touches || e.touches.length === 0) return;
                touchStartX = e.touches[0].clientX;
                touchStartY = e.touches[0].clientY;
            }, { passive: true });
            document.addEventListener('touchend', function(e) {
                if (touchStartX === null || touchStartY === null) return;
                const touchEndX = (e.changedTouches && e.changedTouches[0]) ? e.changedTouches[0].clientX : touchStartX;
                const touchEndY = (e.changedTouches && e.changedTouches[0]) ? e.changedTouches[0].clientY : touchStartY;
                const dx = touchEndX - touchStartX;
                const dy = touchEndY - touchStartY;
                // 忽略垂直滚动为主的手势
                if (Math.abs(dx) > Math.abs(dy) && Math.abs(dx) > threshold) {
                    if (dx < 0) {
                        nextPage();
                    } else {
                        previousPage();
                    }
                }
                touchStartX = touchStartY = null;
            }, { passive: true });
        })();

        // 根据 hash 跳转到指定页，支持 #3 或 #page=3
        function parseHashToPageIndex() {
            const hash = (location.hash || '').replace('#', '').trim();
            if (!hash) return 1;
            if (hash.startsWith('page=')) {
                const v = parseInt(hash.split('=')[1], 10);
                return Number.isFinite(v) ? Math.min(Math.max(v, 1), totalPages) : 1;
            }
            const n = parseInt(hash, 10);
            return Number.isFinite(n) ? Math.min(Math.max(n, 1), totalPages) : 1;
        }

        window.addEventListener('hashchange', function() {
            const target = parseHashToPageIndex();
            if (target !== currentPageIndex) {
                showPage(target);
            }
        });

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 减少动态偏好时，避免创建粒子
            if (!prefersReducedMotion) {
                createParticles();
            }
            const initial = parseHashToPageIndex();
            showPage(initial);
        });
    </script>
</body>
</html>